{"version":3,"sources":["public/src/modules/groupSearch.js"],"names":["define","groupSearch","init","el","utils","isTouchDevice","searchEl","find","length","toggleVisibility","parent","groupEls","on","updateList","val","toLowerCase","noMatch","each","liEl","$","this","isMatch","attr","indexOf","toggleClass","addClass","removeClass","ev","preventDefault","stopPropagation","focus","off"],"mappings":"AAAA,aAEAA,OAAO,cAAe,WACrB,IAAIC,KAEJA,EAAYC,KAAO,SAAUC,GAC5B,GAAIC,MAAMC,gBAAiB,CAC1B,OAED,IAAIC,EAAWH,EAAGI,KAAK,uCACvB,IAAKD,EAASE,OAAQ,CACrB,OAED,IAAIC,EAAmBH,EAASI,OAAO,gCAAgCF,OAAS,EAEhF,IAAIG,EAAWR,EAAGI,KAAK,wCACvBJ,EAAGS,GAAG,mBAAoB,WACzB,SAASC,IACR,IAAIC,EAAMR,EAASC,KAAK,SAASO,MAAMC,cACvC,IAAIC,EAAU,KACdL,EAASM,KAAK,WACb,IAAIC,EAAOC,EAAEC,MACb,IAAIC,EAAUH,EAAKI,KAAK,aAAaP,cAAcQ,QAAQT,MAAU,EACrE,GAAIE,GAAWK,EAAS,CACvBL,EAAU,MAGXE,EAAKM,YAAY,UAAWH,KAG7BlB,EAAGI,KAAK,2DAA2DiB,YAAY,UAAWR,GAE3F,GAAIP,EAAkB,CACrBN,EAAGI,KAAK,oBAAoBkB,SAAS,UACrCnB,EAASoB,YAAY,UAGtBpB,EAASM,GAAG,QAAS,SAAUe,GAC9BA,EAAGC,iBACHD,EAAGE,oBAEJvB,EAASC,KAAK,SAASO,IAAI,IAAIF,GAAG,QAASC,GAC3CA,MAGDV,EAAGS,GAAG,oBAAqB,WAC1BN,EAASC,KAAK,SAASuB,UAGxB3B,EAAGS,GAAG,mBAAoB,WACzB,GAAIH,EAAkB,CACrBN,EAAGI,KAAK,oBAAoBmB,YAAY,UACxCpB,EAASmB,SAAS,UAEnBnB,EAASyB,IAAI,SAASxB,KAAK,SAASwB,IAAI,YAI1C,OAAO9B","file":"public/src/modules/groupSearch.js","sourcesContent":["'use strict';\r\n\r\ndefine('groupSearch', function () {\r\n\tvar groupSearch = {};\r\n\r\n\tgroupSearch.init = function (el) {\r\n\t\tif (utils.isTouchDevice()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar searchEl = el.find('[component=\"group-selector-search\"]');\r\n\t\tif (!searchEl.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar toggleVisibility = searchEl.parent('[component=\"group-selector\"]').length > 0;\r\n\r\n\t\tvar groupEls = el.find('[component=\"group-list\"] [data-name]');\r\n\t\tel.on('show.bs.dropdown', function () {\r\n\t\t\tfunction updateList() {\r\n\t\t\t\tvar val = searchEl.find('input').val().toLowerCase();\r\n\t\t\t\tvar noMatch = true;\r\n\t\t\t\tgroupEls.each(function () {\r\n\t\t\t\t\tvar liEl = $(this);\r\n\t\t\t\t\tvar isMatch = liEl.attr('data-name').toLowerCase().indexOf(val) !== -1;\r\n\t\t\t\t\tif (noMatch && isMatch) {\r\n\t\t\t\t\t\tnoMatch = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tliEl.toggleClass('hidden', !isMatch);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tel.find('[component=\"group-list\"] [component=\"group-no-matches\"]').toggleClass('hidden', !noMatch);\r\n\t\t\t}\r\n\t\t\tif (toggleVisibility) {\r\n\t\t\t\tel.find('.dropdown-toggle').addClass('hidden');\r\n\t\t\t\tsearchEl.removeClass('hidden');\r\n\t\t\t}\r\n\r\n\t\t\tsearchEl.on('click', function (ev) {\r\n\t\t\t\tev.preventDefault();\r\n\t\t\t\tev.stopPropagation();\r\n\t\t\t});\r\n\t\t\tsearchEl.find('input').val('').on('keyup', updateList);\r\n\t\t\tupdateList();\r\n\t\t});\r\n\r\n\t\tel.on('shown.bs.dropdown', function () {\r\n\t\t\tsearchEl.find('input').focus();\r\n\t\t});\r\n\r\n\t\tel.on('hide.bs.dropdown', function () {\r\n\t\t\tif (toggleVisibility) {\r\n\t\t\t\tel.find('.dropdown-toggle').removeClass('hidden');\r\n\t\t\t\tsearchEl.addClass('hidden');\r\n\t\t\t}\r\n\t\t\tsearchEl.off('click').find('input').off('keyup');\r\n\t\t});\r\n\t};\r\n\r\n\treturn groupSearch;\r\n});\r\n"]}