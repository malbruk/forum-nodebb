{"version":3,"sources":["public/src/modules/accounts/delete.js"],"names":["define","api","Delete","account","uid","callback","executeAction","content","purge","confirmText","path","successText","bootbox","confirm","del","then","app","alertSuccess","catch","err","alertError"],"mappings":"AAAA,aAEAA,OAAO,mBAAoB,MAAO,WAAY,SAAUC,GACvD,IAAIC,KAEJA,EAAOC,QAAU,SAAUC,EAAKC,GAC/BC,EACCF,EACA,uCACA,WACA,2BACAC,IAIFH,EAAOK,QAAU,SAAUH,EAAKC,GAC/BC,EACCF,EACA,0CACA,WACA,mCACAC,IAIFH,EAAOM,MAAQ,SAAUJ,EAAKC,GAC7BC,EACCF,EACA,8BACA,GACA,2BACAC,IAIF,SAASC,EAAcF,EAAKK,EAAaC,EAAMC,EAAaN,GAC3DO,QAAQC,QAAQJ,EAAa,SAAUI,GACtC,IAAKA,EAAS,CACb,OAGDZ,EAAIa,cAAcV,IAAMM,QAAYK,KAAK,KACxCC,IAAIC,aAAaN,GAEjB,UAAWN,IAAa,WAAY,CACnC,OAAOA,OAENa,MAAM,SAAUC,GAClBH,IAAII,WAAWD,OAKlB,OAAOjB","file":"public/src/modules/accounts/delete.js","sourcesContent":["'use strict';\r\n\r\ndefine('accounts/delete', ['api', 'bootbox'], function (api) {\r\n\tvar Delete = {};\r\n\r\n\tDelete.account = function (uid, callback) {\r\n\t\texecuteAction(\r\n\t\t\tuid,\r\n\t\t\t'[[user:delete_this_account_confirm]]',\r\n\t\t\t'/account',\r\n\t\t\t'[[user:account-deleted]]',\r\n\t\t\tcallback\r\n\t\t);\r\n\t};\r\n\r\n\tDelete.content = function (uid, callback) {\r\n\t\texecuteAction(\r\n\t\t\tuid,\r\n\t\t\t'[[user:delete_account_content_confirm]]',\r\n\t\t\t'/content',\r\n\t\t\t'[[user:account-content-deleted]]',\r\n\t\t\tcallback\r\n\t\t);\r\n\t};\r\n\r\n\tDelete.purge = function (uid, callback) {\r\n\t\texecuteAction(\r\n\t\t\tuid,\r\n\t\t\t'[[user:delete_all_confirm]]',\r\n\t\t\t'',\r\n\t\t\t'[[user:account-deleted]]',\r\n\t\t\tcallback\r\n\t\t);\r\n\t};\r\n\r\n\tfunction executeAction(uid, confirmText, path, successText, callback) {\r\n\t\tbootbox.confirm(confirmText, function (confirm) {\r\n\t\t\tif (!confirm) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tapi.del(`/users/${uid}${path}`, {}).then(() => {\r\n\t\t\t\tapp.alertSuccess(successText);\r\n\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\treturn callback();\r\n\t\t\t\t}\r\n\t\t\t}).catch(function (err) {\r\n\t\t\t\tapp.alertError(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treturn Delete;\r\n});\r\n"]}