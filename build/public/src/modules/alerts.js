"use strict";define("alerts",["translator","components","hooks"],function(t,e,n){var i={};i.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:(new Date).getTime());t.title=t.title?t.title.trim()||"":"";t.message=t.message?t.message.trim():"";t.type=t.type||"info";var e=$("#"+t.alert_id);if(e.length){r(e,t)}else{a(t)}};function a(t){app.parseAndTranslate("alert",t,function(i){var a=$("#"+t.alert_id);if(a.length){return r(a,t)}a=i;a.fadeIn(200);e.get("toaster/tray").prepend(a);if(typeof t.closefn==="function"){a.find("button").on("click",function(){t.closefn();o(a);return false})}if(t.timeout){s(a,t)}if(typeof t.clickfn==="function"){a.addClass("pointer").on("click",function(e){if(!$(e.target).is(".close")){t.clickfn(a,t)}o(a)})}n.fire("action:alert.new",{alert:a,params:t})})}i.remove=function(t){$("#alert_button_"+t).remove()};function r(e,i){e.find("strong").html(i.title);e.find("p").html(i.message);e.attr("class","alert alert-dismissable alert-"+i.type+" clearfix");clearTimeout(parseInt(e.attr("timeoutId"),10));if(i.timeout){s(e,i)}e.children().fadeOut(100);t.translate(e.html(),function(t){e.children().fadeIn(100);e.html(t);n.fire("action:alert.update",{alert:e,params:i})});e.off("click").removeClass("pointer");if(typeof i.clickfn==="function"){e.addClass("pointer").on("click",function(t){if(!$(t.target).is(".close")){i.clickfn()}o(e)})}}function o(t){t.fadeOut(500,function(){$(this).remove()})}function s(t,e){var i=e.timeout;var a=setTimeout(function(){o(t);if(typeof e.timeoutfn==="function"){e.timeoutfn(t,e)}},i);t.attr("timeoutId",a);t.css("transition-property","none");t.removeClass("animate");setTimeout(function(){t.css("transition-property","");t.css("transition","width "+(i+450)+"ms linear, background-color "+(i+450)+"ms ease-in");t.addClass("animate");n.fire("action:alert.animate",{alert:t,params:e})},50);t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return i});
//# sourceMappingURL=alerts.js.map