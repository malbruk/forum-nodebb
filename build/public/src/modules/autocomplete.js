"use strict";define("autocomplete",["api"],function(e){var t={};t.user=function(t,n,a){if(typeof n==="function"){a=n;n={}}n=n||{};app.loadJQueryUI(function(){t.autocomplete({delay:200,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(e,n){u(t,a,e,n)},source:function(t,u){n.query=t.term;e.get("/api/users",n,function(e,t){if(e){return app.alertError(e.message)}if(t&&t.users){var n=t.users.map(function(e){var t=$("<div></div>").html(e.username).text();return e&&{label:t,value:t,user:{uid:e.uid,name:e.username,slug:e.userslug,username:e.username,userslug:e.userslug,picture:e.picture,banned:e.banned,"icon:text":e["icon:text"],"icon:bgColor":e["icon:bgColor"]}}});u(n)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})})};t.group=function(e,t){app.loadJQueryUI(function(){e.autocomplete({delay:200,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(n,a){u(e,t,n,a)},source:function(e,t){socket.emit("groups.search",{query:e.term},function(e,u){if(e){return app.alertError(e.message)}if(u&&u.length){var n=u.map(function(e){return e&&{label:e.name,value:e.name,group:e}});t(n)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})})};t.tag=function(e,t){app.loadJQueryUI(function(){e.autocomplete({delay:100,open:function(){$(this).autocomplete("widget").css("z-index",2e4)},select:function(n,a){u(e,t,n,a)},source:function(e,t){socket.emit("topics.autocompleteTags",{query:e.term,cid:ajaxify.data.cid||0},function(e,u){if(e){return app.alertError(e.message)}if(u){t(u)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})})};function u(e,t,u,n){t=t||function(){};var a=jQuery.Event("keypress");a.which=13;a.keyCode=13;setTimeout(function(){e.trigger(a)},100);t(u,n)}return t});
//# sourceMappingURL=autocomplete.js.map