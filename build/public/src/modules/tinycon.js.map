{"version":3,"sources":["node_modules/tinycon/tinycon.js"],"names":["Tinycon","currentFavicon","originalFavicon","faviconImage","canvas","options","r","Math","ceil","window","devicePixelRatio","size","defaults","width","height","font","color","background","fallback","crossOrigin","abbreviate","ua","agent","navigator","userAgent","toLowerCase","browser","indexOf","ie","chrome","webkit","safari","mozilla","getFaviconTag","links","document","getElementsByTagName","i","len","length","getAttribute","match","removeFaviconTag","exists","parentNode","removeChild","getCurrentFavicon","tag","getCanvas","createElement","setFaviconTag","url","link","type","rel","href","appendChild","log","message","console","drawFavicon","label","getContext","updateTitle","context","src","onload","clearRect","drawImage","drawBubble","refreshFavicon","originalTitle","title","slice","abbreviateNumber","top","left","bottom","right","radius","fillStyle","strokeStyle","lineWidth","beginPath","moveTo","quadraticCurveTo","lineTo","closePath","fill","stroke","textAlign","textBaseline","fillText","toDataURL","metricPrefixes","round","value","precision","number","Number","toFixed","setOptions","custom","colour","key","hasOwnProperty","this","setImage","setBubble","reset","define","amd","module","exports"],"mappings":"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","file":"node_modules/tinycon/tinycon.js","sourcesContent":["/*!\n * Tinycon - A small library for manipulating the Favicon\n * Tom Moor, http://tommoor.com\n * Copyright (c) 2015 Tom Moor\n * @license MIT Licensed\n */\n\n(function(){\n\n  var Tinycon = {};\n  var currentFavicon = null;\n  var originalFavicon = null;\n  var faviconImage = null;\n  var canvas = null;\n  var options = {};\n  // Chrome browsers with nonstandard zoom report fractional devicePixelRatio.\n  var r = Math.ceil(window.devicePixelRatio) || 1;\n  var size = 16 * r;\n  var defaults = {\n    width: 7,\n    height: 9,\n    font: 10 * r + 'px arial',\n    color: '#ffffff',\n    background: '#F03D25',\n    fallback: true,\n    crossOrigin: true,\n    abbreviate: true\n  };\n\n  var ua = (function () {\n    var agent = navigator.userAgent.toLowerCase();\n    // New function has access to 'agent' via closure\n    return function (browser) {\n      return agent.indexOf(browser) !== -1;\n    };\n  }());\n\n  var browser = {\n    ie: ua('trident'),\n    chrome: ua('chrome'),\n    webkit: ua('chrome') || ua('safari'),\n    safari: ua('safari') && !ua('chrome'),\n    mozilla: ua('mozilla') && !ua('chrome') && !ua('safari')\n  };\n\n  // private methods\n  var getFaviconTag = function(){\n\n    var links = document.getElementsByTagName('link');\n\n    for(var i=0, len=links.length; i < len; i++) {\n      if ((links[i].getAttribute('rel') || '').match(/\\bicon\\b/i)) {\n        return links[i];\n      }\n    }\n\n    return false;\n  };\n\n  var removeFaviconTag = function(){\n\n    var links = document.getElementsByTagName('link');\n\n    for(var i=0, len=links.length; i < len; i++) {\n      var exists = (typeof(links[i]) !== 'undefined');\n      if (exists && (links[i].getAttribute('rel') || '').match(/\\bicon\\b/i)) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n  };\n\n  var getCurrentFavicon = function(){\n\n    if (!originalFavicon || !currentFavicon) {\n      var tag = getFaviconTag();\n      currentFavicon = tag ? tag.getAttribute('href') : '/favicon.ico';\n      if (!originalFavicon) {\n        originalFavicon = currentFavicon;\n      }\n    }\n\n    return currentFavicon;\n  };\n\n  var getCanvas = function (){\n\n    if (!canvas) {\n      canvas = document.createElement(\"canvas\");\n      canvas.width = size;\n      canvas.height = size;\n    }\n\n    return canvas;\n  };\n\n  var setFaviconTag = function(url){\n    if(url){\n      removeFaviconTag();\n\n      var link = document.createElement('link');\n      link.type = 'image/x-icon';\n      link.rel = 'icon';\n      link.href = url;\n      document.getElementsByTagName('head')[0].appendChild(link);\n    }\n  };\n\n  var log = function(message){\n    if (window.console) window.console.log(message);\n  };\n\n  var drawFavicon = function(label, color) {\n\n    // fallback to updating the browser title if unsupported\n    if (!getCanvas().getContext || browser.ie || browser.safari || options.fallback === 'force') {\n      return updateTitle(label);\n    }\n\n    var context = getCanvas().getContext(\"2d\");\n    var color = color || '#000000';\n    var src = getCurrentFavicon();\n\n    faviconImage = document.createElement('img');\n    faviconImage.onload = function() {\n\n      // clear canvas\n      context.clearRect(0, 0, size, size);\n\n      // draw the favicon\n      context.drawImage(faviconImage, 0, 0, faviconImage.width, faviconImage.height, 0, 0, size, size);\n\n      // draw bubble over the top\n      if ((label + '').length > 0) drawBubble(context, label, color);\n\n      // refresh tag in page\n      refreshFavicon();\n    };\n\n    // allow cross origin resource requests if the image is not a data:uri\n    // as detailed here: https://github.com/mrdoob/three.js/issues/1305\n    if (!src.match(/^data/) && options.crossOrigin) {\n      faviconImage.crossOrigin = 'anonymous';\n    }\n\n    faviconImage.src = src;\n  };\n\n  var updateTitle = function(label) {\n\n    if (options.fallback) {\n      // Grab the current title that we can prefix with the label\n      var originalTitle = document.title;\n\n      // Strip out the old label if there is one\n      if (originalTitle[0] === '(') {\n        originalTitle = originalTitle.slice(originalTitle.indexOf(' '));\n      }\n\n      if ((label + '').length > 0) {\n        document.title = '(' + label + ') ' + originalTitle;\n      } else {\n        document.title = originalTitle;\n      }\n    }\n  };\n\n  var drawBubble = function(context, label, color) {\n\n    // automatic abbreviation for long (>2 digits) numbers\n    if (typeof label == 'number' && label > 99 && options.abbreviate) {\n      label = abbreviateNumber(label);\n    }\n\n    // bubble needs to be larger for double digits\n    var len = (label + '').length-1;\n\n    var width = options.width * r + (6 * r * len),\n      height = options.height * r;\n\n    var top = size - height,\n            left = size - width - r,\n            bottom = 16 * r,\n            right = 16 * r,\n            radius = 2 * r;\n\n    // webkit seems to render fonts lighter than firefox\n    context.font = (browser.webkit ? 'bold ' : '') + options.font;\n    context.fillStyle = options.background;\n    context.strokeStyle = options.background;\n    context.lineWidth = r;\n\n    // bubble\n    context.beginPath();\n    context.moveTo(left + radius, top);\n    context.quadraticCurveTo(left, top, left, top + radius);\n    context.lineTo(left, bottom - radius);\n    context.quadraticCurveTo(left, bottom, left + radius, bottom);\n    context.lineTo(right - radius, bottom);\n    context.quadraticCurveTo(right, bottom, right, bottom - radius);\n    context.lineTo(right, top + radius);\n    context.quadraticCurveTo(right, top, right - radius, top);\n    context.closePath();\n    context.fill();\n\n    // bottom shadow\n    context.beginPath();\n    context.strokeStyle = \"rgba(0,0,0,0.3)\";\n    context.moveTo(left + radius / 2.0, bottom);\n    context.lineTo(right - radius / 2.0, bottom);\n    context.stroke();\n\n    // label\n    context.fillStyle = options.color;\n    context.textAlign = \"right\";\n    context.textBaseline = \"top\";\n\n    // unfortunately webkit/mozilla are a pixel different in text positioning\n    context.fillText(label, r === 2 ? 29 : 15, browser.mozilla ? 7*r : 6*r);\n  };\n\n  var refreshFavicon = function(){\n    // check support\n    if (!getCanvas().getContext) return;\n\n    setFaviconTag(getCanvas().toDataURL());\n  };\n\n  var abbreviateNumber = function(label) {\n    var metricPrefixes = [\n      ['G', 1000000000],\n      ['M',    1000000],\n      ['k',       1000]\n    ];\n\n    for(var i = 0; i < metricPrefixes.length; ++i) {\n      if (label >= metricPrefixes[i][1]) {\n        label = round(label / metricPrefixes[i][1]) + metricPrefixes[i][0];\n        break;\n      }\n    }\n\n    return label;\n  };\n\n  var round = function (value, precision) {\n    var number = new Number(value);\n    return number.toFixed(precision);\n  };\n\n  // public methods\n  Tinycon.setOptions = function(custom){\n    options = {};\n\n    // account for deprecated UK English spelling\n    if (custom.colour) {\n      custom.color = custom.colour;\n    }\n\n    for(var key in defaults){\n      options[key] = custom.hasOwnProperty(key) ? custom[key] : defaults[key];\n    }\n    return this;\n  };\n\n  Tinycon.setImage = function(url){\n    currentFavicon = url;\n    refreshFavicon();\n    return this;\n  };\n\n  Tinycon.setBubble = function(label, color) {\n    label = label || '';\n    drawFavicon(label, color);\n    return this;\n  };\n\n  Tinycon.reset = function(){\n    currentFavicon = originalFavicon;\n    setFaviconTag(originalFavicon);\n  };\n\n  Tinycon.setOptions(defaults);\n\n  if(typeof define === 'function' && define.amd) {\n    define(Tinycon);\n  } else if (typeof module !== 'undefined') {\n    module.exports = Tinycon;\n  } else {\n    window.Tinycon = Tinycon;\n  }\n\n})();\n"]}