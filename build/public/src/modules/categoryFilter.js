"use strict";define("categoryFilter",["categorySearch","api"],function(e,t){var i={};i.init=function(t,i){if(!t||!t.length){return}i=i||{};i.states=i.states||["watching","notwatching","ignoring"];i.template="partials/category-filter";$(window).trigger("action:category.filter.options",{el:t,options:i});e.init(t,i);var a=[];var r=[];if(Array.isArray(i.selectedCids)){a=i.selectedCids.map(e=>parseInt(e,10))}else if(Array.isArray(ajaxify.data.selectedCids)){a=ajaxify.data.selectedCids.map(e=>parseInt(e,10))}r=a.slice();t.on("hidden.bs.dropdown",function(){var e=r.length!==a.length;r.forEach(function(t,i){if(t!==a[i]){e=true}});if(e){n(t,a)}if(i.onHidden){i.onHidden({changed:e,selectedCids:a.slice()});return}if(e){var l=window.location.pathname;var s=utils.params();if(a.length){s.cid=a;l+="?"+decodeURIComponent($.param(s))}ajaxify.go(l)}});t.on("click",'[component="category/list"] [data-cid]',function(){var e=t.find('[component="category/list"]');var n=$(this);var r=n.find("a").attr("href");if(r&&r!=="#"&&r.length){return}var l=parseInt(n.attr("data-cid"),10);var s=n.find('[component="category/select/icon"]');if(a.includes(l)){a.splice(a.indexOf(l),1)}else{a.push(l)}a.sort(function(e,t){return e-t});i.selectedCids=a;s.toggleClass("invisible");e.find('li[data-all="all"] i').toggleClass("invisible",!!a.length);if(i.onSelect){i.onSelect({cid:l,selectedCids:a.slice()})}return false})};function n(e,i){if(i.length>1){n({icon:"fa-plus",name:"[[unread:multiple-categories-selected]]",bgColor:"#ddd"})}else if(i.length===1){t.get(`/categories/${i[0]}`,{}).then(n)}else{n()}function n(t){app.parseAndTranslate("partials/category-filter-content",{selectedCategory:t},function(t){e.find("button").replaceWith($("<div/>").html(t).find("button"))})}}return i});
//# sourceMappingURL=categoryFilter.js.map