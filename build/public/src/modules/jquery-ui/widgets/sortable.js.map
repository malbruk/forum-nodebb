{"version":3,"sources":["node_modules/jquery-ui/ui/widgets/sortable.js"],"names":["factory","define","amd","jQuery","$","widget","ui","mouse","version","widgetEventPrefix","ready","options","appendTo","axis","connectWith","containment","cursor","cursorAt","dropOnEmpty","forcePlaceholderSize","forceHelperSize","grid","handle","helper","items","opacity","placeholder","revert","scroll","scrollSensitivity","scrollSpeed","scope","tolerance","zIndex","activate","beforeStop","change","deactivate","out","over","receive","remove","sort","start","stop","update","_isOverAxis","x","reference","size","_isFloating","item","test","css","_create","this","containerCache","_addClass","refresh","offset","element","_mouseInit","_setHandleClassName","_setOption","key","value","_super","that","_removeClass","find","each","instance","_destroy","_mouseDestroy","i","length","removeData","widgetName","_mouseCapture","event","overrideHandle","currentItem","validHandle","reverting","disabled","type","_refreshItems","target","parents","data","addBack","_removeCurrentsFromItems","_mouseStart","noActivation","body","o","currentContainer","refreshPositions","_createHelper","_cacheHelperProportions","_cacheMargins","scrollParent","top","margins","left","extend","click","pageX","pageY","parent","_getParentOffset","relative","_getRelativeOffset","cssPosition","originalPosition","_generatePosition","originalPageX","originalPageY","_adjustOffsetFromHelper","domPosition","prev","hide","_createPlaceholder","_setContainment","document","storedCursor","storedStylesheet","_storedOpacity","_storedZIndex","tagName","overflowOffset","_trigger","_uiHash","_preserveHelperProportions","containers","ddmanager","current","dropBehaviour","prepareOffsets","dragging","_mouseDrag","itemElement","intersection","scrolled","position","positionAbs","_convertPositionTo","lastPositionAbs","offsetHeight","scrollTop","offsetWidth","scrollLeft","window","height","width","style","_intersectsWithPointer","contains","direction","_intersectsWithSides","_rearrange","_contactContainers","drag","_mouseStop","noPropagation","drop","cur","animation","offsetParent","animate","parseInt","_clear","cancel","_mouseUp","Event","_storedCSS","show","parentNode","removeChild","_noFinalSort","after","prepend","serialize","_getItemsAsjQuery","connected","str","res","attr","attribute","match","expression","push","join","toArray","ret","_intersectsWith","x1","x2","helperProportions","y1","y2","l","r","t","b","dyClick","dxClick","isOverElementHeight","isOverElementWidth","isOverElement","forcePointerForContainers","floating","verticalDirection","horizontalDirection","_getDragVerticalDirection","_getDragHorizontalDirection","isOverBottomHalf","isOverRightHalf","delta","_connectWith","constructor","String","j","inst","queries","widgetFullName","isFunction","call","not","addItems","list","grep","targetData","_queries","queriesLength","fast","p","toleranceElement","outerWidth","outerHeight","custom","refreshContainers","className","nodeName","toLowerCase","_createTrPlaceholder","eq","container","innerHeight","innerWidth","sourceTr","targetTr","children","dist","itemWithLeastDistance","posProperty","sizeProperty","nearBottom","innermostContainer","innermostIndex","Math","abs","apply","clone","appendChild","obj","split","isArray","right","bottom","po","ie","ce","co","scrollHeight","max","scrollWidth","d","pos","mod","scrollIsRootNode","round","a","hardRefresh","insertBefore","nextSibling","counter","_delay","delayedTriggers","before","fromOutside","c","delayEvent","cancelHelperRemoval","Widget","prototype","arguments","_inst","sender"],"mappings":"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","file":"node_modules/jquery-ui/ui/widgets/sortable.js","sourcesContent":["/*!\n * jQuery UI Sortable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Sortable\n//>>group: Interactions\n//>>description: Enables items in a list to be sorted using the mouse.\n//>>docs: http://api.jqueryui.com/sortable/\n//>>demos: http://jqueryui.com/sortable/\n//>>css.structure: ../../themes/base/sortable.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./mouse\",\n\t\t\t\"../data\",\n\t\t\t\"../ie\",\n\t\t\t\"../scroll-parent\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\nreturn $.widget( \"ui.sortable\", $.ui.mouse, {\n\tversion: \"1.12.1\",\n\twidgetEventPrefix: \"sort\",\n\tready: false,\n\toptions: {\n\t\tappendTo: \"parent\",\n\t\taxis: false,\n\t\tconnectWith: false,\n\t\tcontainment: false,\n\t\tcursor: \"auto\",\n\t\tcursorAt: false,\n\t\tdropOnEmpty: true,\n\t\tforcePlaceholderSize: false,\n\t\tforceHelperSize: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: \"original\",\n\t\titems: \"> *\",\n\t\topacity: false,\n\t\tplaceholder: false,\n\t\trevert: false,\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tscope: \"default\",\n\t\ttolerance: \"intersect\",\n\t\tzIndex: 1000,\n\n\t\t// Callbacks\n\t\tactivate: null,\n\t\tbeforeStop: null,\n\t\tchange: null,\n\t\tdeactivate: null,\n\t\tout: null,\n\t\tover: null,\n\t\treceive: null,\n\t\tremove: null,\n\t\tsort: null,\n\t\tstart: null,\n\t\tstop: null,\n\t\tupdate: null\n\t},\n\n\t_isOverAxis: function( x, reference, size ) {\n\t\treturn ( x >= reference ) && ( x < ( reference + size ) );\n\t},\n\n\t_isFloating: function( item ) {\n\t\treturn ( /left|right/ ).test( item.css( \"float\" ) ) ||\n\t\t\t( /inline|table-cell/ ).test( item.css( \"display\" ) );\n\t},\n\n\t_create: function() {\n\t\tthis.containerCache = {};\n\t\tthis._addClass( \"ui-sortable\" );\n\n\t\t//Get the items\n\t\tthis.refresh();\n\n\t\t//Let's determine the parent's offset\n\t\tthis.offset = this.element.offset();\n\n\t\t//Initialize mouse events for interaction\n\t\tthis._mouseInit();\n\n\t\tthis._setHandleClassName();\n\n\t\t//We're ready to go\n\t\tthis.ready = true;\n\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"handle\" ) {\n\t\t\tthis._setHandleClassName();\n\t\t}\n\t},\n\n\t_setHandleClassName: function() {\n\t\tvar that = this;\n\t\tthis._removeClass( this.element.find( \".ui-sortable-handle\" ), \"ui-sortable-handle\" );\n\t\t$.each( this.items, function() {\n\t\t\tthat._addClass(\n\t\t\t\tthis.instance.options.handle ?\n\t\t\t\t\tthis.item.find( this.instance.options.handle ) :\n\t\t\t\t\tthis.item,\n\t\t\t\t\"ui-sortable-handle\"\n\t\t\t);\n\t\t} );\n\t},\n\n\t_destroy: function() {\n\t\tthis._mouseDestroy();\n\n\t\tfor ( var i = this.items.length - 1; i >= 0; i-- ) {\n\t\t\tthis.items[ i ].item.removeData( this.widgetName + \"-item\" );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_mouseCapture: function( event, overrideHandle ) {\n\t\tvar currentItem = null,\n\t\t\tvalidHandle = false,\n\t\t\tthat = this;\n\n\t\tif ( this.reverting ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.options.disabled || this.options.type === \"static\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t//We have to refresh the items data once first\n\t\tthis._refreshItems( event );\n\n\t\t//Find out if the clicked node (or one of its parents) is a actual item in this.items\n\t\t$( event.target ).parents().each( function() {\n\t\t\tif ( $.data( this, that.widgetName + \"-item\" ) === that ) {\n\t\t\t\tcurrentItem = $( this );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\t\tif ( $.data( event.target, that.widgetName + \"-item\" ) === that ) {\n\t\t\tcurrentItem = $( event.target );\n\t\t}\n\n\t\tif ( !currentItem ) {\n\t\t\treturn false;\n\t\t}\n\t\tif ( this.options.handle && !overrideHandle ) {\n\t\t\t$( this.options.handle, currentItem ).find( \"*\" ).addBack().each( function() {\n\t\t\t\tif ( this === event.target ) {\n\t\t\t\t\tvalidHandle = true;\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( !validHandle ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis.currentItem = currentItem;\n\t\tthis._removeCurrentsFromItems();\n\t\treturn true;\n\n\t},\n\n\t_mouseStart: function( event, overrideHandle, noActivation ) {\n\n\t\tvar i, body,\n\t\t\to = this.options;\n\n\t\tthis.currentContainer = this;\n\n\t\t//We only need to call refreshPositions, because the refreshItems call has been moved to\n\t\t// mouseCapture\n\t\tthis.refreshPositions();\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper( event );\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it's the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Get the next scrolling parent\n\t\tthis.scrollParent = this.helper.scrollParent();\n\n\t\t//The element's absolute position on the page minus margins\n\t\tthis.offset = this.currentItem.offset();\n\t\tthis.offset = {\n\t\t\ttop: this.offset.top - this.margins.top,\n\t\t\tleft: this.offset.left - this.margins.left\n\t\t};\n\n\t\t$.extend( this.offset, {\n\t\t\tclick: { //Where the click happened, relative to the element\n\t\t\t\tleft: event.pageX - this.offset.left,\n\t\t\t\ttop: event.pageY - this.offset.top\n\t\t\t},\n\t\t\tparent: this._getParentOffset(),\n\n\t\t\t// This is a relative to absolute position minus the actual position calculation -\n\t\t\t// only used for relative positioned helper\n\t\t\trelative: this._getRelativeOffset()\n\t\t} );\n\n\t\t// Only after we got the offset, we can change the helper's position to absolute\n\t\t// TODO: Still need to figure out a way to make relative sorting possible\n\t\tthis.helper.css( \"position\", \"absolute\" );\n\t\tthis.cssPosition = this.helper.css( \"position\" );\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this._generatePosition( event );\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\t( o.cursorAt && this._adjustOffsetFromHelper( o.cursorAt ) );\n\n\t\t//Cache the former DOM position\n\t\tthis.domPosition = {\n\t\t\tprev: this.currentItem.prev()[ 0 ],\n\t\t\tparent: this.currentItem.parent()[ 0 ]\n\t\t};\n\n\t\t// If the helper is not the original, hide the original so it's not playing any role during\n\t\t// the drag, won't cause anything bad this way\n\t\tif ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {\n\t\t\tthis.currentItem.hide();\n\t\t}\n\n\t\t//Create the placeholder\n\t\tthis._createPlaceholder();\n\n\t\t//Set a containment if given in the options\n\t\tif ( o.containment ) {\n\t\t\tthis._setContainment();\n\t\t}\n\n\t\tif ( o.cursor && o.cursor !== \"auto\" ) { // cursor option\n\t\t\tbody = this.document.find( \"body\" );\n\n\t\t\t// Support: IE\n\t\t\tthis.storedCursor = body.css( \"cursor\" );\n\t\t\tbody.css( \"cursor\", o.cursor );\n\n\t\t\tthis.storedStylesheet =\n\t\t\t\t$( \"<style>*{ cursor: \" + o.cursor + \" !important; }</style>\" ).appendTo( body );\n\t\t}\n\n\t\tif ( o.opacity ) { // opacity option\n\t\t\tif ( this.helper.css( \"opacity\" ) ) {\n\t\t\t\tthis._storedOpacity = this.helper.css( \"opacity\" );\n\t\t\t}\n\t\t\tthis.helper.css( \"opacity\", o.opacity );\n\t\t}\n\n\t\tif ( o.zIndex ) { // zIndex option\n\t\t\tif ( this.helper.css( \"zIndex\" ) ) {\n\t\t\t\tthis._storedZIndex = this.helper.css( \"zIndex\" );\n\t\t\t}\n\t\t\tthis.helper.css( \"zIndex\", o.zIndex );\n\t\t}\n\n\t\t//Prepare scrolling\n\t\tif ( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\n\t\t\t\tthis.scrollParent[ 0 ].tagName !== \"HTML\" ) {\n\t\t\tthis.overflowOffset = this.scrollParent.offset();\n\t\t}\n\n\t\t//Call callbacks\n\t\tthis._trigger( \"start\", event, this._uiHash() );\n\n\t\t//Recache the helper size\n\t\tif ( !this._preserveHelperProportions ) {\n\t\t\tthis._cacheHelperProportions();\n\t\t}\n\n\t\t//Post \"activate\" events to possible containers\n\t\tif ( !noActivation ) {\n\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\n\t\t\t\tthis.containers[ i ]._trigger( \"activate\", event, this._uiHash( this ) );\n\t\t\t}\n\t\t}\n\n\t\t//Prepare possible droppables\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.current = this;\n\t\t}\n\n\t\tif ( $.ui.ddmanager && !o.dropBehaviour ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( this, event );\n\t\t}\n\n\t\tthis.dragging = true;\n\n\t\tthis._addClass( this.helper, \"ui-sortable-helper\" );\n\n\t\t// Execute the drag once - this causes the helper not to be visiblebefore getting its\n\t\t// correct position\n\t\tthis._mouseDrag( event );\n\t\treturn true;\n\n\t},\n\n\t_mouseDrag: function( event ) {\n\t\tvar i, item, itemElement, intersection,\n\t\t\to = this.options,\n\t\t\tscrolled = false;\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition( event );\n\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\n\t\tif ( !this.lastPositionAbs ) {\n\t\t\tthis.lastPositionAbs = this.positionAbs;\n\t\t}\n\n\t\t//Do scrolling\n\t\tif ( this.options.scroll ) {\n\t\t\tif ( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\n\t\t\t\t\tthis.scrollParent[ 0 ].tagName !== \"HTML\" ) {\n\n\t\t\t\tif ( ( this.overflowOffset.top + this.scrollParent[ 0 ].offsetHeight ) -\n\t\t\t\t\t\tevent.pageY < o.scrollSensitivity ) {\n\t\t\t\t\tthis.scrollParent[ 0 ].scrollTop =\n\t\t\t\t\t\tscrolled = this.scrollParent[ 0 ].scrollTop + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageY - this.overflowOffset.top < o.scrollSensitivity ) {\n\t\t\t\t\tthis.scrollParent[ 0 ].scrollTop =\n\t\t\t\t\t\tscrolled = this.scrollParent[ 0 ].scrollTop - o.scrollSpeed;\n\t\t\t\t}\n\n\t\t\t\tif ( ( this.overflowOffset.left + this.scrollParent[ 0 ].offsetWidth ) -\n\t\t\t\t\t\tevent.pageX < o.scrollSensitivity ) {\n\t\t\t\t\tthis.scrollParent[ 0 ].scrollLeft = scrolled =\n\t\t\t\t\t\tthis.scrollParent[ 0 ].scrollLeft + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageX - this.overflowOffset.left < o.scrollSensitivity ) {\n\t\t\t\t\tthis.scrollParent[ 0 ].scrollLeft = scrolled =\n\t\t\t\t\t\tthis.scrollParent[ 0 ].scrollLeft - o.scrollSpeed;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( event.pageY - this.document.scrollTop() < o.scrollSensitivity ) {\n\t\t\t\t\tscrolled = this.document.scrollTop( this.document.scrollTop() - o.scrollSpeed );\n\t\t\t\t} else if ( this.window.height() - ( event.pageY - this.document.scrollTop() ) <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrolled = this.document.scrollTop( this.document.scrollTop() + o.scrollSpeed );\n\t\t\t\t}\n\n\t\t\t\tif ( event.pageX - this.document.scrollLeft() < o.scrollSensitivity ) {\n\t\t\t\t\tscrolled = this.document.scrollLeft(\n\t\t\t\t\t\tthis.document.scrollLeft() - o.scrollSpeed\n\t\t\t\t\t);\n\t\t\t\t} else if ( this.window.width() - ( event.pageX - this.document.scrollLeft() ) <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrolled = this.document.scrollLeft(\n\t\t\t\t\t\tthis.document.scrollLeft() + o.scrollSpeed\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( scrolled !== false && $.ui.ddmanager && !o.dropBehaviour ) {\n\t\t\t\t$.ui.ddmanager.prepareOffsets( this, event );\n\t\t\t}\n\t\t}\n\n\t\t//Regenerate the absolute position used for position checks\n\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\n\t\t//Set the helper position\n\t\tif ( !this.options.axis || this.options.axis !== \"y\" ) {\n\t\t\tthis.helper[ 0 ].style.left = this.position.left + \"px\";\n\t\t}\n\t\tif ( !this.options.axis || this.options.axis !== \"x\" ) {\n\t\t\tthis.helper[ 0 ].style.top = this.position.top + \"px\";\n\t\t}\n\n\t\t//Rearrange\n\t\tfor ( i = this.items.length - 1; i >= 0; i-- ) {\n\n\t\t\t//Cache variables and intersection, continue if no intersection\n\t\t\titem = this.items[ i ];\n\t\t\titemElement = item.item[ 0 ];\n\t\t\tintersection = this._intersectsWithPointer( item );\n\t\t\tif ( !intersection ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Only put the placeholder inside the current Container, skip all\n\t\t\t// items from other containers. This works because when moving\n\t\t\t// an item from one container to another the\n\t\t\t// currentContainer is switched before the placeholder is moved.\n\t\t\t//\n\t\t\t// Without this, moving items in \"sub-sortables\" can cause\n\t\t\t// the placeholder to jitter between the outer and inner container.\n\t\t\tif ( item.instance !== this.currentContainer ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Cannot intersect with itself\n\t\t\t// no useless actions that have been done before\n\t\t\t// no action if the item moved is the parent of the item checked\n\t\t\tif ( itemElement !== this.currentItem[ 0 ] &&\n\t\t\t\tthis.placeholder[ intersection === 1 ? \"next\" : \"prev\" ]()[ 0 ] !== itemElement &&\n\t\t\t\t!$.contains( this.placeholder[ 0 ], itemElement ) &&\n\t\t\t\t( this.options.type === \"semi-dynamic\" ?\n\t\t\t\t\t!$.contains( this.element[ 0 ], itemElement ) :\n\t\t\t\t\ttrue\n\t\t\t\t)\n\t\t\t) {\n\n\t\t\t\tthis.direction = intersection === 1 ? \"down\" : \"up\";\n\n\t\t\t\tif ( this.options.tolerance === \"pointer\" || this._intersectsWithSides( item ) ) {\n\t\t\t\t\tthis._rearrange( event, item );\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tthis._trigger( \"change\", event, this._uiHash() );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t//Post events to containers\n\t\tthis._contactContainers( event );\n\n\t\t//Interconnect with droppables\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.drag( this, event );\n\t\t}\n\n\t\t//Call callbacks\n\t\tthis._trigger( \"sort\", event, this._uiHash() );\n\n\t\tthis.lastPositionAbs = this.positionAbs;\n\t\treturn false;\n\n\t},\n\n\t_mouseStop: function( event, noPropagation ) {\n\n\t\tif ( !event ) {\n\t\t\treturn;\n\t\t}\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tif ( $.ui.ddmanager && !this.options.dropBehaviour ) {\n\t\t\t$.ui.ddmanager.drop( this, event );\n\t\t}\n\n\t\tif ( this.options.revert ) {\n\t\t\tvar that = this,\n\t\t\t\tcur = this.placeholder.offset(),\n\t\t\t\taxis = this.options.axis,\n\t\t\t\tanimation = {};\n\n\t\t\tif ( !axis || axis === \"x\" ) {\n\t\t\t\tanimation.left = cur.left - this.offset.parent.left - this.margins.left +\n\t\t\t\t\t( this.offsetParent[ 0 ] === this.document[ 0 ].body ?\n\t\t\t\t\t\t0 :\n\t\t\t\t\t\tthis.offsetParent[ 0 ].scrollLeft\n\t\t\t\t\t);\n\t\t\t}\n\t\t\tif ( !axis || axis === \"y\" ) {\n\t\t\t\tanimation.top = cur.top - this.offset.parent.top - this.margins.top +\n\t\t\t\t\t( this.offsetParent[ 0 ] === this.document[ 0 ].body ?\n\t\t\t\t\t\t0 :\n\t\t\t\t\t\tthis.offsetParent[ 0 ].scrollTop\n\t\t\t\t\t);\n\t\t\t}\n\t\t\tthis.reverting = true;\n\t\t\t$( this.helper ).animate(\n\t\t\t\tanimation,\n\t\t\t\tparseInt( this.options.revert, 10 ) || 500,\n\t\t\t\tfunction() {\n\t\t\t\t\tthat._clear( event );\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tthis._clear( event, noPropagation );\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tcancel: function() {\n\n\t\tif ( this.dragging ) {\n\n\t\t\tthis._mouseUp( new $.Event( \"mouseup\", { target: null } ) );\n\n\t\t\tif ( this.options.helper === \"original\" ) {\n\t\t\t\tthis.currentItem.css( this._storedCSS );\n\t\t\t\tthis._removeClass( this.currentItem, \"ui-sortable-helper\" );\n\t\t\t} else {\n\t\t\t\tthis.currentItem.show();\n\t\t\t}\n\n\t\t\t//Post deactivating events to containers\n\t\t\tfor ( var i = this.containers.length - 1; i >= 0; i-- ) {\n\t\t\t\tthis.containers[ i ]._trigger( \"deactivate\", null, this._uiHash( this ) );\n\t\t\t\tif ( this.containers[ i ].containerCache.over ) {\n\t\t\t\t\tthis.containers[ i ]._trigger( \"out\", null, this._uiHash( this ) );\n\t\t\t\t\tthis.containers[ i ].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.placeholder ) {\n\n\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately,\n\t\t\t// it unbinds ALL events from the original node!\n\t\t\tif ( this.placeholder[ 0 ].parentNode ) {\n\t\t\t\tthis.placeholder[ 0 ].parentNode.removeChild( this.placeholder[ 0 ] );\n\t\t\t}\n\t\t\tif ( this.options.helper !== \"original\" && this.helper &&\n\t\t\t\t\tthis.helper[ 0 ].parentNode ) {\n\t\t\t\tthis.helper.remove();\n\t\t\t}\n\n\t\t\t$.extend( this, {\n\t\t\t\thelper: null,\n\t\t\t\tdragging: false,\n\t\t\t\treverting: false,\n\t\t\t\t_noFinalSort: null\n\t\t\t} );\n\n\t\t\tif ( this.domPosition.prev ) {\n\t\t\t\t$( this.domPosition.prev ).after( this.currentItem );\n\t\t\t} else {\n\t\t\t\t$( this.domPosition.parent ).prepend( this.currentItem );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tserialize: function( o ) {\n\n\t\tvar items = this._getItemsAsjQuery( o && o.connected ),\n\t\t\tstr = [];\n\t\to = o || {};\n\n\t\t$( items ).each( function() {\n\t\t\tvar res = ( $( o.item || this ).attr( o.attribute || \"id\" ) || \"\" )\n\t\t\t\t.match( o.expression || ( /(.+)[\\-=_](.+)/ ) );\n\t\t\tif ( res ) {\n\t\t\t\tstr.push(\n\t\t\t\t\t( o.key || res[ 1 ] + \"[]\" ) +\n\t\t\t\t\t\"=\" + ( o.key && o.expression ? res[ 1 ] : res[ 2 ] ) );\n\t\t\t}\n\t\t} );\n\n\t\tif ( !str.length && o.key ) {\n\t\t\tstr.push( o.key + \"=\" );\n\t\t}\n\n\t\treturn str.join( \"&\" );\n\n\t},\n\n\ttoArray: function( o ) {\n\n\t\tvar items = this._getItemsAsjQuery( o && o.connected ),\n\t\t\tret = [];\n\n\t\to = o || {};\n\n\t\titems.each( function() {\n\t\t\tret.push( $( o.item || this ).attr( o.attribute || \"id\" ) || \"\" );\n\t\t} );\n\t\treturn ret;\n\n\t},\n\n\t/* Be careful with the following core functions */\n\t_intersectsWith: function( item ) {\n\n\t\tvar x1 = this.positionAbs.left,\n\t\t\tx2 = x1 + this.helperProportions.width,\n\t\t\ty1 = this.positionAbs.top,\n\t\t\ty2 = y1 + this.helperProportions.height,\n\t\t\tl = item.left,\n\t\t\tr = l + item.width,\n\t\t\tt = item.top,\n\t\t\tb = t + item.height,\n\t\t\tdyClick = this.offset.click.top,\n\t\t\tdxClick = this.offset.click.left,\n\t\t\tisOverElementHeight = ( this.options.axis === \"x\" ) || ( ( y1 + dyClick ) > t &&\n\t\t\t\t( y1 + dyClick ) < b ),\n\t\t\tisOverElementWidth = ( this.options.axis === \"y\" ) || ( ( x1 + dxClick ) > l &&\n\t\t\t\t( x1 + dxClick ) < r ),\n\t\t\tisOverElement = isOverElementHeight && isOverElementWidth;\n\n\t\tif ( this.options.tolerance === \"pointer\" ||\n\t\t\tthis.options.forcePointerForContainers ||\n\t\t\t( this.options.tolerance !== \"pointer\" &&\n\t\t\t\tthis.helperProportions[ this.floating ? \"width\" : \"height\" ] >\n\t\t\t\titem[ this.floating ? \"width\" : \"height\" ] )\n\t\t) {\n\t\t\treturn isOverElement;\n\t\t} else {\n\n\t\t\treturn ( l < x1 + ( this.helperProportions.width / 2 ) && // Right Half\n\t\t\t\tx2 - ( this.helperProportions.width / 2 ) < r && // Left Half\n\t\t\t\tt < y1 + ( this.helperProportions.height / 2 ) && // Bottom Half\n\t\t\t\ty2 - ( this.helperProportions.height / 2 ) < b ); // Top Half\n\n\t\t}\n\t},\n\n\t_intersectsWithPointer: function( item ) {\n\t\tvar verticalDirection, horizontalDirection,\n\t\t\tisOverElementHeight = ( this.options.axis === \"x\" ) ||\n\t\t\t\tthis._isOverAxis(\n\t\t\t\t\tthis.positionAbs.top + this.offset.click.top, item.top, item.height ),\n\t\t\tisOverElementWidth = ( this.options.axis === \"y\" ) ||\n\t\t\t\tthis._isOverAxis(\n\t\t\t\t\tthis.positionAbs.left + this.offset.click.left, item.left, item.width ),\n\t\t\tisOverElement = isOverElementHeight && isOverElementWidth;\n\n\t\tif ( !isOverElement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tverticalDirection = this._getDragVerticalDirection();\n\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\treturn this.floating ?\n\t\t\t( ( horizontalDirection === \"right\" || verticalDirection === \"down\" ) ? 2 : 1 )\n\t\t\t: ( verticalDirection && ( verticalDirection === \"down\" ? 2 : 1 ) );\n\n\t},\n\n\t_intersectsWithSides: function( item ) {\n\n\t\tvar isOverBottomHalf = this._isOverAxis( this.positionAbs.top +\n\t\t\t\tthis.offset.click.top, item.top + ( item.height / 2 ), item.height ),\n\t\t\tisOverRightHalf = this._isOverAxis( this.positionAbs.left +\n\t\t\t\tthis.offset.click.left, item.left + ( item.width / 2 ), item.width ),\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\tif ( this.floating && horizontalDirection ) {\n\t\t\treturn ( ( horizontalDirection === \"right\" && isOverRightHalf ) ||\n\t\t\t\t( horizontalDirection === \"left\" && !isOverRightHalf ) );\n\t\t} else {\n\t\t\treturn verticalDirection && ( ( verticalDirection === \"down\" && isOverBottomHalf ) ||\n\t\t\t\t( verticalDirection === \"up\" && !isOverBottomHalf ) );\n\t\t}\n\n\t},\n\n\t_getDragVerticalDirection: function() {\n\t\tvar delta = this.positionAbs.top - this.lastPositionAbs.top;\n\t\treturn delta !== 0 && ( delta > 0 ? \"down\" : \"up\" );\n\t},\n\n\t_getDragHorizontalDirection: function() {\n\t\tvar delta = this.positionAbs.left - this.lastPositionAbs.left;\n\t\treturn delta !== 0 && ( delta > 0 ? \"right\" : \"left\" );\n\t},\n\n\trefresh: function( event ) {\n\t\tthis._refreshItems( event );\n\t\tthis._setHandleClassName();\n\t\tthis.refreshPositions();\n\t\treturn this;\n\t},\n\n\t_connectWith: function() {\n\t\tvar options = this.options;\n\t\treturn options.connectWith.constructor === String ?\n\t\t\t[ options.connectWith ] :\n\t\t\toptions.connectWith;\n\t},\n\n\t_getItemsAsjQuery: function( connected ) {\n\n\t\tvar i, j, cur, inst,\n\t\t\titems = [],\n\t\t\tqueries = [],\n\t\t\tconnectWith = this._connectWith();\n\n\t\tif ( connectWith && connected ) {\n\t\t\tfor ( i = connectWith.length - 1; i >= 0; i-- ) {\n\t\t\t\tcur = $( connectWith[ i ], this.document[ 0 ] );\n\t\t\t\tfor ( j = cur.length - 1; j >= 0; j-- ) {\n\t\t\t\t\tinst = $.data( cur[ j ], this.widgetFullName );\n\t\t\t\t\tif ( inst && inst !== this && !inst.options.disabled ) {\n\t\t\t\t\t\tqueries.push( [ $.isFunction( inst.options.items ) ?\n\t\t\t\t\t\t\tinst.options.items.call( inst.element ) :\n\t\t\t\t\t\t\t$( inst.options.items, inst.element )\n\t\t\t\t\t\t\t\t.not( \".ui-sortable-helper\" )\n\t\t\t\t\t\t\t\t.not( \".ui-sortable-placeholder\" ), inst ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tqueries.push( [ $.isFunction( this.options.items ) ?\n\t\t\tthis.options.items\n\t\t\t\t.call( this.element, null, { options: this.options, item: this.currentItem } ) :\n\t\t\t$( this.options.items, this.element )\n\t\t\t\t.not( \".ui-sortable-helper\" )\n\t\t\t\t.not( \".ui-sortable-placeholder\" ), this ] );\n\n\t\tfunction addItems() {\n\t\t\titems.push( this );\n\t\t}\n\t\tfor ( i = queries.length - 1; i >= 0; i-- ) {\n\t\t\tqueries[ i ][ 0 ].each( addItems );\n\t\t}\n\n\t\treturn $( items );\n\n\t},\n\n\t_removeCurrentsFromItems: function() {\n\n\t\tvar list = this.currentItem.find( \":data(\" + this.widgetName + \"-item)\" );\n\n\t\tthis.items = $.grep( this.items, function( item ) {\n\t\t\tfor ( var j = 0; j < list.length; j++ ) {\n\t\t\t\tif ( list[ j ] === item.item[ 0 ] ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} );\n\n\t},\n\n\t_refreshItems: function( event ) {\n\n\t\tthis.items = [];\n\t\tthis.containers = [ this ];\n\n\t\tvar i, j, cur, inst, targetData, _queries, item, queriesLength,\n\t\t\titems = this.items,\n\t\t\tqueries = [ [ $.isFunction( this.options.items ) ?\n\t\t\t\tthis.options.items.call( this.element[ 0 ], event, { item: this.currentItem } ) :\n\t\t\t\t$( this.options.items, this.element ), this ] ],\n\t\t\tconnectWith = this._connectWith();\n\n\t\t//Shouldn't be run the first time through due to massive slow-down\n\t\tif ( connectWith && this.ready ) {\n\t\t\tfor ( i = connectWith.length - 1; i >= 0; i-- ) {\n\t\t\t\tcur = $( connectWith[ i ], this.document[ 0 ] );\n\t\t\t\tfor ( j = cur.length - 1; j >= 0; j-- ) {\n\t\t\t\t\tinst = $.data( cur[ j ], this.widgetFullName );\n\t\t\t\t\tif ( inst && inst !== this && !inst.options.disabled ) {\n\t\t\t\t\t\tqueries.push( [ $.isFunction( inst.options.items ) ?\n\t\t\t\t\t\t\tinst.options.items\n\t\t\t\t\t\t\t\t.call( inst.element[ 0 ], event, { item: this.currentItem } ) :\n\t\t\t\t\t\t\t$( inst.options.items, inst.element ), inst ] );\n\t\t\t\t\t\tthis.containers.push( inst );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor ( i = queries.length - 1; i >= 0; i-- ) {\n\t\t\ttargetData = queries[ i ][ 1 ];\n\t\t\t_queries = queries[ i ][ 0 ];\n\n\t\t\tfor ( j = 0, queriesLength = _queries.length; j < queriesLength; j++ ) {\n\t\t\t\titem = $( _queries[ j ] );\n\n\t\t\t\t// Data for target checking (mouse manager)\n\t\t\t\titem.data( this.widgetName + \"-item\", targetData );\n\n\t\t\t\titems.push( {\n\t\t\t\t\titem: item,\n\t\t\t\t\tinstance: targetData,\n\t\t\t\t\twidth: 0, height: 0,\n\t\t\t\t\tleft: 0, top: 0\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t},\n\n\trefreshPositions: function( fast ) {\n\n\t\t// Determine whether items are being displayed horizontally\n\t\tthis.floating = this.items.length ?\n\t\t\tthis.options.axis === \"x\" || this._isFloating( this.items[ 0 ].item ) :\n\t\t\tfalse;\n\n\t\t//This has to be redone because due to the item being moved out/into the offsetParent,\n\t\t// the offsetParent's position will change\n\t\tif ( this.offsetParent && this.helper ) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\tvar i, item, t, p;\n\n\t\tfor ( i = this.items.length - 1; i >= 0; i-- ) {\n\t\t\titem = this.items[ i ];\n\n\t\t\t//We ignore calculating positions of all connected containers when we're not over them\n\t\t\tif ( item.instance !== this.currentContainer && this.currentContainer &&\n\t\t\t\t\titem.item[ 0 ] !== this.currentItem[ 0 ] ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tt = this.options.toleranceElement ?\n\t\t\t\t$( this.options.toleranceElement, item.item ) :\n\t\t\t\titem.item;\n\n\t\t\tif ( !fast ) {\n\t\t\t\titem.width = t.outerWidth();\n\t\t\t\titem.height = t.outerHeight();\n\t\t\t}\n\n\t\t\tp = t.offset();\n\t\t\titem.left = p.left;\n\t\t\titem.top = p.top;\n\t\t}\n\n\t\tif ( this.options.custom && this.options.custom.refreshContainers ) {\n\t\t\tthis.options.custom.refreshContainers.call( this );\n\t\t} else {\n\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\n\t\t\t\tp = this.containers[ i ].element.offset();\n\t\t\t\tthis.containers[ i ].containerCache.left = p.left;\n\t\t\t\tthis.containers[ i ].containerCache.top = p.top;\n\t\t\t\tthis.containers[ i ].containerCache.width =\n\t\t\t\t\tthis.containers[ i ].element.outerWidth();\n\t\t\t\tthis.containers[ i ].containerCache.height =\n\t\t\t\t\tthis.containers[ i ].element.outerHeight();\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_createPlaceholder: function( that ) {\n\t\tthat = that || this;\n\t\tvar className,\n\t\t\to = that.options;\n\n\t\tif ( !o.placeholder || o.placeholder.constructor === String ) {\n\t\t\tclassName = o.placeholder;\n\t\t\to.placeholder = {\n\t\t\t\telement: function() {\n\n\t\t\t\t\tvar nodeName = that.currentItem[ 0 ].nodeName.toLowerCase(),\n\t\t\t\t\t\telement = $( \"<\" + nodeName + \">\", that.document[ 0 ] );\n\n\t\t\t\t\t\tthat._addClass( element, \"ui-sortable-placeholder\",\n\t\t\t\t\t\t\t\tclassName || that.currentItem[ 0 ].className )\n\t\t\t\t\t\t\t._removeClass( element, \"ui-sortable-helper\" );\n\n\t\t\t\t\tif ( nodeName === \"tbody\" ) {\n\t\t\t\t\t\tthat._createTrPlaceholder(\n\t\t\t\t\t\t\tthat.currentItem.find( \"tr\" ).eq( 0 ),\n\t\t\t\t\t\t\t$( \"<tr>\", that.document[ 0 ] ).appendTo( element )\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if ( nodeName === \"tr\" ) {\n\t\t\t\t\t\tthat._createTrPlaceholder( that.currentItem, element );\n\t\t\t\t\t} else if ( nodeName === \"img\" ) {\n\t\t\t\t\t\telement.attr( \"src\", that.currentItem.attr( \"src\" ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !className ) {\n\t\t\t\t\t\telement.css( \"visibility\", \"hidden\" );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn element;\n\t\t\t\t},\n\t\t\t\tupdate: function( container, p ) {\n\n\t\t\t\t\t// 1. If a className is set as 'placeholder option, we don't force sizes -\n\t\t\t\t\t// the class is responsible for that\n\t\t\t\t\t// 2. The option 'forcePlaceholderSize can be enabled to force it even if a\n\t\t\t\t\t// class name is specified\n\t\t\t\t\tif ( className && !o.forcePlaceholderSize ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//If the element doesn't have a actual height by itself (without styles coming\n\t\t\t\t\t// from a stylesheet), it receives the inline height from the dragged item\n\t\t\t\t\tif ( !p.height() ) {\n\t\t\t\t\t\tp.height(\n\t\t\t\t\t\t\tthat.currentItem.innerHeight() -\n\t\t\t\t\t\t\tparseInt( that.currentItem.css( \"paddingTop\" ) || 0, 10 ) -\n\t\t\t\t\t\t\tparseInt( that.currentItem.css( \"paddingBottom\" ) || 0, 10 ) );\n\t\t\t\t\t}\n\t\t\t\t\tif ( !p.width() ) {\n\t\t\t\t\t\tp.width(\n\t\t\t\t\t\t\tthat.currentItem.innerWidth() -\n\t\t\t\t\t\t\tparseInt( that.currentItem.css( \"paddingLeft\" ) || 0, 10 ) -\n\t\t\t\t\t\t\tparseInt( that.currentItem.css( \"paddingRight\" ) || 0, 10 ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t//Create the placeholder\n\t\tthat.placeholder = $( o.placeholder.element.call( that.element, that.currentItem ) );\n\n\t\t//Append it after the actual current item\n\t\tthat.currentItem.after( that.placeholder );\n\n\t\t//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)\n\t\to.placeholder.update( that, that.placeholder );\n\n\t},\n\n\t_createTrPlaceholder: function( sourceTr, targetTr ) {\n\t\tvar that = this;\n\n\t\tsourceTr.children().each( function() {\n\t\t\t$( \"<td>&#160;</td>\", that.document[ 0 ] )\n\t\t\t\t.attr( \"colspan\", $( this ).attr( \"colspan\" ) || 1 )\n\t\t\t\t.appendTo( targetTr );\n\t\t} );\n\t},\n\n\t_contactContainers: function( event ) {\n\t\tvar i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom,\n\t\t\tfloating, axis,\n\t\t\tinnermostContainer = null,\n\t\t\tinnermostIndex = null;\n\n\t\t// Get innermost container that intersects with item\n\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\n\n\t\t\t// Never consider a container that's located within the item itself\n\t\t\tif ( $.contains( this.currentItem[ 0 ], this.containers[ i ].element[ 0 ] ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( this._intersectsWith( this.containers[ i ].containerCache ) ) {\n\n\t\t\t\t// If we've already found a container and it's more \"inner\" than this, then continue\n\t\t\t\tif ( innermostContainer &&\n\t\t\t\t\t\t$.contains(\n\t\t\t\t\t\t\tthis.containers[ i ].element[ 0 ],\n\t\t\t\t\t\t\tinnermostContainer.element[ 0 ] ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tinnermostContainer = this.containers[ i ];\n\t\t\t\tinnermostIndex = i;\n\n\t\t\t} else {\n\n\t\t\t\t// container doesn't intersect. trigger \"out\" event if necessary\n\t\t\t\tif ( this.containers[ i ].containerCache.over ) {\n\t\t\t\t\tthis.containers[ i ]._trigger( \"out\", event, this._uiHash( this ) );\n\t\t\t\t\tthis.containers[ i ].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t// If no intersecting containers found, return\n\t\tif ( !innermostContainer ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Move the item into the container if it's not there already\n\t\tif ( this.containers.length === 1 ) {\n\t\t\tif ( !this.containers[ innermostIndex ].containerCache.over ) {\n\t\t\t\tthis.containers[ innermostIndex ]._trigger( \"over\", event, this._uiHash( this ) );\n\t\t\t\tthis.containers[ innermostIndex ].containerCache.over = 1;\n\t\t\t}\n\t\t} else {\n\n\t\t\t// When entering a new container, we will find the item with the least distance and\n\t\t\t// append our item near it\n\t\t\tdist = 10000;\n\t\t\titemWithLeastDistance = null;\n\t\t\tfloating = innermostContainer.floating || this._isFloating( this.currentItem );\n\t\t\tposProperty = floating ? \"left\" : \"top\";\n\t\t\tsizeProperty = floating ? \"width\" : \"height\";\n\t\t\taxis = floating ? \"pageX\" : \"pageY\";\n\n\t\t\tfor ( j = this.items.length - 1; j >= 0; j-- ) {\n\t\t\t\tif ( !$.contains(\n\t\t\t\t\t\tthis.containers[ innermostIndex ].element[ 0 ], this.items[ j ].item[ 0 ] )\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif ( this.items[ j ].item[ 0 ] === this.currentItem[ 0 ] ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcur = this.items[ j ].item.offset()[ posProperty ];\n\t\t\t\tnearBottom = false;\n\t\t\t\tif ( event[ axis ] - cur > this.items[ j ][ sizeProperty ] / 2 ) {\n\t\t\t\t\tnearBottom = true;\n\t\t\t\t}\n\n\t\t\t\tif ( Math.abs( event[ axis ] - cur ) < dist ) {\n\t\t\t\t\tdist = Math.abs( event[ axis ] - cur );\n\t\t\t\t\titemWithLeastDistance = this.items[ j ];\n\t\t\t\t\tthis.direction = nearBottom ? \"up\" : \"down\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Check if dropOnEmpty is enabled\n\t\t\tif ( !itemWithLeastDistance && !this.options.dropOnEmpty ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.currentContainer === this.containers[ innermostIndex ] ) {\n\t\t\t\tif ( !this.currentContainer.containerCache.over ) {\n\t\t\t\t\tthis.containers[ innermostIndex ]._trigger( \"over\", event, this._uiHash() );\n\t\t\t\t\tthis.currentContainer.containerCache.over = 1;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\titemWithLeastDistance ?\n\t\t\t\tthis._rearrange( event, itemWithLeastDistance, null, true ) :\n\t\t\t\tthis._rearrange( event, null, this.containers[ innermostIndex ].element, true );\n\t\t\tthis._trigger( \"change\", event, this._uiHash() );\n\t\t\tthis.containers[ innermostIndex ]._trigger( \"change\", event, this._uiHash( this ) );\n\t\t\tthis.currentContainer = this.containers[ innermostIndex ];\n\n\t\t\t//Update the placeholder\n\t\t\tthis.options.placeholder.update( this.currentContainer, this.placeholder );\n\n\t\t\tthis.containers[ innermostIndex ]._trigger( \"over\", event, this._uiHash( this ) );\n\t\t\tthis.containers[ innermostIndex ].containerCache.over = 1;\n\t\t}\n\n\t},\n\n\t_createHelper: function( event ) {\n\n\t\tvar o = this.options,\n\t\t\thelper = $.isFunction( o.helper ) ?\n\t\t\t\t$( o.helper.apply( this.element[ 0 ], [ event, this.currentItem ] ) ) :\n\t\t\t\t( o.helper === \"clone\" ? this.currentItem.clone() : this.currentItem );\n\n\t\t//Add the helper to the DOM if that didn't happen already\n\t\tif ( !helper.parents( \"body\" ).length ) {\n\t\t\t$( o.appendTo !== \"parent\" ?\n\t\t\t\to.appendTo :\n\t\t\t\tthis.currentItem[ 0 ].parentNode )[ 0 ].appendChild( helper[ 0 ] );\n\t\t}\n\n\t\tif ( helper[ 0 ] === this.currentItem[ 0 ] ) {\n\t\t\tthis._storedCSS = {\n\t\t\t\twidth: this.currentItem[ 0 ].style.width,\n\t\t\t\theight: this.currentItem[ 0 ].style.height,\n\t\t\t\tposition: this.currentItem.css( \"position\" ),\n\t\t\t\ttop: this.currentItem.css( \"top\" ),\n\t\t\t\tleft: this.currentItem.css( \"left\" )\n\t\t\t};\n\t\t}\n\n\t\tif ( !helper[ 0 ].style.width || o.forceHelperSize ) {\n\t\t\thelper.width( this.currentItem.width() );\n\t\t}\n\t\tif ( !helper[ 0 ].style.height || o.forceHelperSize ) {\n\t\t\thelper.height( this.currentItem.height() );\n\t\t}\n\n\t\treturn helper;\n\n\t},\n\n\t_adjustOffsetFromHelper: function( obj ) {\n\t\tif ( typeof obj === \"string\" ) {\n\t\t\tobj = obj.split( \" \" );\n\t\t}\n\t\tif ( $.isArray( obj ) ) {\n\t\t\tobj = { left: +obj[ 0 ], top: +obj[ 1 ] || 0 };\n\t\t}\n\t\tif ( \"left\" in obj ) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif ( \"right\" in obj ) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif ( \"top\" in obj ) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif ( \"bottom\" in obj ) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_getParentOffset: function() {\n\n\t\t//Get the offsetParent and cache its position\n\t\tthis.offsetParent = this.helper.offsetParent();\n\t\tvar po = this.offsetParent.offset();\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the\n\t\t// following happened:\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the\n\t\t// next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't\n\t\t// the document, which means that the scroll is included in the initial calculation of the\n\t\t// offset of the parent, and never recalculated upon drag\n\t\tif ( this.cssPosition === \"absolute\" && this.scrollParent[ 0 ] !== this.document[ 0 ] &&\n\t\t\t\t$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\t// This needs to be actually done for all browsers, since pageX/pageY includes this\n\t\t// information with an ugly IE fix\n\t\tif ( this.offsetParent[ 0 ] === this.document[ 0 ].body ||\n\t\t\t\t( this.offsetParent[ 0 ].tagName &&\n\t\t\t\tthis.offsetParent[ 0 ].tagName.toLowerCase() === \"html\" && $.ui.ie ) ) {\n\t\t\tpo = { top: 0, left: 0 };\n\t\t}\n\n\t\treturn {\n\t\t\ttop: po.top + ( parseInt( this.offsetParent.css( \"borderTopWidth\" ), 10 ) || 0 ),\n\t\t\tleft: po.left + ( parseInt( this.offsetParent.css( \"borderLeftWidth\" ), 10 ) || 0 )\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\n\t\tif ( this.cssPosition === \"relative\" ) {\n\t\t\tvar p = this.currentItem.position();\n\t\t\treturn {\n\t\t\t\ttop: p.top - ( parseInt( this.helper.css( \"top\" ), 10 ) || 0 ) +\n\t\t\t\t\tthis.scrollParent.scrollTop(),\n\t\t\t\tleft: p.left - ( parseInt( this.helper.css( \"left\" ), 10 ) || 0 ) +\n\t\t\t\t\tthis.scrollParent.scrollLeft()\n\t\t\t};\n\t\t} else {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: ( parseInt( this.currentItem.css( \"marginLeft\" ), 10 ) || 0 ),\n\t\t\ttop: ( parseInt( this.currentItem.css( \"marginTop\" ), 10 ) || 0 )\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar ce, co, over,\n\t\t\to = this.options;\n\t\tif ( o.containment === \"parent\" ) {\n\t\t\to.containment = this.helper[ 0 ].parentNode;\n\t\t}\n\t\tif ( o.containment === \"document\" || o.containment === \"window\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t0 - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t0 - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\to.containment === \"document\" ?\n\t\t\t\t\tthis.document.width() :\n\t\t\t\t\tthis.window.width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t( o.containment === \"document\" ?\n\t\t\t\t\t( this.document.height() || document.body.parentNode.scrollHeight ) :\n\t\t\t\t\tthis.window.height() || this.document[ 0 ].body.parentNode.scrollHeight\n\t\t\t\t) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t}\n\n\t\tif ( !( /^(document|window|parent)$/ ).test( o.containment ) ) {\n\t\t\tce = $( o.containment )[ 0 ];\n\t\t\tco = $( o.containment ).offset();\n\t\t\tover = ( $( ce ).css( \"overflow\" ) !== \"hidden\" );\n\n\t\t\tthis.containment = [\n\t\t\t\tco.left + ( parseInt( $( ce ).css( \"borderLeftWidth\" ), 10 ) || 0 ) +\n\t\t\t\t\t( parseInt( $( ce ).css( \"paddingLeft\" ), 10 ) || 0 ) - this.margins.left,\n\t\t\t\tco.top + ( parseInt( $( ce ).css( \"borderTopWidth\" ), 10 ) || 0 ) +\n\t\t\t\t\t( parseInt( $( ce ).css( \"paddingTop\" ), 10 ) || 0 ) - this.margins.top,\n\t\t\t\tco.left + ( over ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -\n\t\t\t\t\t( parseInt( $( ce ).css( \"borderLeftWidth\" ), 10 ) || 0 ) -\n\t\t\t\t\t( parseInt( $( ce ).css( \"paddingRight\" ), 10 ) || 0 ) -\n\t\t\t\t\tthis.helperProportions.width - this.margins.left,\n\t\t\t\tco.top + ( over ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -\n\t\t\t\t\t( parseInt( $( ce ).css( \"borderTopWidth\" ), 10 ) || 0 ) -\n\t\t\t\t\t( parseInt( $( ce ).css( \"paddingBottom\" ), 10 ) || 0 ) -\n\t\t\t\t\tthis.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t}\n\n\t},\n\n\t_convertPositionTo: function( d, pos ) {\n\n\t\tif ( !pos ) {\n\t\t\tpos = this.position;\n\t\t}\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\tscroll = this.cssPosition === \"absolute\" &&\n\t\t\t\t!( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\n\t\t\t\t$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ?\n\t\t\t\t\tthis.offsetParent :\n\t\t\t\t\tthis.scrollParent,\n\t\t\tscrollIsRootNode = ( /(html|body)/i ).test( scroll[ 0 ].tagName );\n\n\t\treturn {\n\t\t\ttop: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpos.top\t+\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.top * mod +\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.top * mod -\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.scrollParent.scrollTop() :\n\t\t\t\t\t( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod )\n\t\t\t),\n\t\t\tleft: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpos.left +\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.left * mod +\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.left * mod\t-\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 :\n\t\t\t\t\tscroll.scrollLeft() ) * mod )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function( event ) {\n\n\t\tvar top, left,\n\t\t\to = this.options,\n\t\t\tpageX = event.pageX,\n\t\t\tpageY = event.pageY,\n\t\t\tscroll = this.cssPosition === \"absolute\" &&\n\t\t\t\t!( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\n\t\t\t\t$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ?\n\t\t\t\t\tthis.offsetParent :\n\t\t\t\t\tthis.scrollParent,\n\t\t\t\tscrollIsRootNode = ( /(html|body)/i ).test( scroll[ 0 ].tagName );\n\n\t\t// This is another very weird special case that only happens for relative elements:\n\t\t// 1. If the css position is relative\n\t\t// 2. and the scroll parent is the document or similar to the offset parent\n\t\t// we have to refresh the relative offset during the scroll so there are no jumps\n\t\tif ( this.cssPosition === \"relative\" && !( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\n\t\t\t\tthis.scrollParent[ 0 ] !== this.offsetParent[ 0 ] ) ) {\n\t\t\tthis.offset.relative = this._getRelativeOffset();\n\t\t}\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\tif ( this.originalPosition ) { //If we are not dragging yet, we won't check for options\n\n\t\t\tif ( this.containment ) {\n\t\t\t\tif ( event.pageX - this.offset.click.left < this.containment[ 0 ] ) {\n\t\t\t\t\tpageX = this.containment[ 0 ] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif ( event.pageY - this.offset.click.top < this.containment[ 1 ] ) {\n\t\t\t\t\tpageY = this.containment[ 1 ] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t\tif ( event.pageX - this.offset.click.left > this.containment[ 2 ] ) {\n\t\t\t\t\tpageX = this.containment[ 2 ] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif ( event.pageY - this.offset.click.top > this.containment[ 3 ] ) {\n\t\t\t\t\tpageY = this.containment[ 3 ] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( o.grid ) {\n\t\t\t\ttop = this.originalPageY + Math.round( ( pageY - this.originalPageY ) /\n\t\t\t\t\to.grid[ 1 ] ) * o.grid[ 1 ];\n\t\t\t\tpageY = this.containment ?\n\t\t\t\t\t( ( top - this.offset.click.top >= this.containment[ 1 ] &&\n\t\t\t\t\t\ttop - this.offset.click.top <= this.containment[ 3 ] ) ?\n\t\t\t\t\t\t\ttop :\n\t\t\t\t\t\t\t( ( top - this.offset.click.top >= this.containment[ 1 ] ) ?\n\t\t\t\t\t\t\t\ttop - o.grid[ 1 ] : top + o.grid[ 1 ] ) ) :\n\t\t\t\t\t\t\t\ttop;\n\n\t\t\t\tleft = this.originalPageX + Math.round( ( pageX - this.originalPageX ) /\n\t\t\t\t\to.grid[ 0 ] ) * o.grid[ 0 ];\n\t\t\t\tpageX = this.containment ?\n\t\t\t\t\t( ( left - this.offset.click.left >= this.containment[ 0 ] &&\n\t\t\t\t\t\tleft - this.offset.click.left <= this.containment[ 2 ] ) ?\n\t\t\t\t\t\t\tleft :\n\t\t\t\t\t\t\t( ( left - this.offset.click.left >= this.containment[ 0 ] ) ?\n\t\t\t\t\t\t\t\tleft - o.grid[ 0 ] : left + o.grid[ 0 ] ) ) :\n\t\t\t\t\t\t\t\tleft;\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpageY -\n\n\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.click.top -\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.top -\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.top +\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.scrollParent.scrollTop() :\n\t\t\t\t\t( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) )\n\t\t\t),\n\t\t\tleft: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpageX -\n\n\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.click.left -\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.left -\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.left +\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.scrollParent.scrollLeft() :\n\t\t\t\t\tscrollIsRootNode ? 0 : scroll.scrollLeft() ) )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_rearrange: function( event, i, a, hardRefresh ) {\n\n\t\ta ? a[ 0 ].appendChild( this.placeholder[ 0 ] ) :\n\t\t\ti.item[ 0 ].parentNode.insertBefore( this.placeholder[ 0 ],\n\t\t\t\t( this.direction === \"down\" ? i.item[ 0 ] : i.item[ 0 ].nextSibling ) );\n\n\t\t//Various things done here to improve the performance:\n\t\t// 1. we create a setTimeout, that calls refreshPositions\n\t\t// 2. on the instance, we have a counter variable, that get's higher after every append\n\t\t// 3. on the local scope, we copy the counter variable, and check in the timeout,\n\t\t// if it's still the same\n\t\t// 4. this lets only the last addition to the timeout stack through\n\t\tthis.counter = this.counter ? ++this.counter : 1;\n\t\tvar counter = this.counter;\n\n\t\tthis._delay( function() {\n\t\t\tif ( counter === this.counter ) {\n\n\t\t\t\t//Precompute after each DOM insertion, NOT on mousemove\n\t\t\t\tthis.refreshPositions( !hardRefresh );\n\t\t\t}\n\t\t} );\n\n\t},\n\n\t_clear: function( event, noPropagation ) {\n\n\t\tthis.reverting = false;\n\n\t\t// We delay all events that have to be triggered to after the point where the placeholder\n\t\t// has been removed and everything else normalized again\n\t\tvar i,\n\t\t\tdelayedTriggers = [];\n\n\t\t// We first have to update the dom position of the actual currentItem\n\t\t// Note: don't do it if the current item is already removed (by a user), or it gets\n\t\t// reappended (see #4088)\n\t\tif ( !this._noFinalSort && this.currentItem.parent().length ) {\n\t\t\tthis.placeholder.before( this.currentItem );\n\t\t}\n\t\tthis._noFinalSort = null;\n\n\t\tif ( this.helper[ 0 ] === this.currentItem[ 0 ] ) {\n\t\t\tfor ( i in this._storedCSS ) {\n\t\t\t\tif ( this._storedCSS[ i ] === \"auto\" || this._storedCSS[ i ] === \"static\" ) {\n\t\t\t\t\tthis._storedCSS[ i ] = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.currentItem.css( this._storedCSS );\n\t\t\tthis._removeClass( this.currentItem, \"ui-sortable-helper\" );\n\t\t} else {\n\t\t\tthis.currentItem.show();\n\t\t}\n\n\t\tif ( this.fromOutside && !noPropagation ) {\n\t\t\tdelayedTriggers.push( function( event ) {\n\t\t\t\tthis._trigger( \"receive\", event, this._uiHash( this.fromOutside ) );\n\t\t\t} );\n\t\t}\n\t\tif ( ( this.fromOutside ||\n\t\t\t\tthis.domPosition.prev !==\n\t\t\t\tthis.currentItem.prev().not( \".ui-sortable-helper\" )[ 0 ] ||\n\t\t\t\tthis.domPosition.parent !== this.currentItem.parent()[ 0 ] ) && !noPropagation ) {\n\n\t\t\t// Trigger update callback if the DOM position has changed\n\t\t\tdelayedTriggers.push( function( event ) {\n\t\t\t\tthis._trigger( \"update\", event, this._uiHash() );\n\t\t\t} );\n\t\t}\n\n\t\t// Check if the items Container has Changed and trigger appropriate\n\t\t// events.\n\t\tif ( this !== this.currentContainer ) {\n\t\t\tif ( !noPropagation ) {\n\t\t\t\tdelayedTriggers.push( function( event ) {\n\t\t\t\t\tthis._trigger( \"remove\", event, this._uiHash() );\n\t\t\t\t} );\n\t\t\t\tdelayedTriggers.push( ( function( c ) {\n\t\t\t\t\treturn function( event ) {\n\t\t\t\t\t\tc._trigger( \"receive\", event, this._uiHash( this ) );\n\t\t\t\t\t};\n\t\t\t\t} ).call( this, this.currentContainer ) );\n\t\t\t\tdelayedTriggers.push( ( function( c ) {\n\t\t\t\t\treturn function( event ) {\n\t\t\t\t\t\tc._trigger( \"update\", event, this._uiHash( this ) );\n\t\t\t\t\t};\n\t\t\t\t} ).call( this, this.currentContainer ) );\n\t\t\t}\n\t\t}\n\n\t\t//Post events to containers\n\t\tfunction delayEvent( type, instance, container ) {\n\t\t\treturn function( event ) {\n\t\t\t\tcontainer._trigger( type, event, instance._uiHash( instance ) );\n\t\t\t};\n\t\t}\n\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\n\t\t\tif ( !noPropagation ) {\n\t\t\t\tdelayedTriggers.push( delayEvent( \"deactivate\", this, this.containers[ i ] ) );\n\t\t\t}\n\t\t\tif ( this.containers[ i ].containerCache.over ) {\n\t\t\t\tdelayedTriggers.push( delayEvent( \"out\", this, this.containers[ i ] ) );\n\t\t\t\tthis.containers[ i ].containerCache.over = 0;\n\t\t\t}\n\t\t}\n\n\t\t//Do what was originally in plugins\n\t\tif ( this.storedCursor ) {\n\t\t\tthis.document.find( \"body\" ).css( \"cursor\", this.storedCursor );\n\t\t\tthis.storedStylesheet.remove();\n\t\t}\n\t\tif ( this._storedOpacity ) {\n\t\t\tthis.helper.css( \"opacity\", this._storedOpacity );\n\t\t}\n\t\tif ( this._storedZIndex ) {\n\t\t\tthis.helper.css( \"zIndex\", this._storedZIndex === \"auto\" ? \"\" : this._storedZIndex );\n\t\t}\n\n\t\tthis.dragging = false;\n\n\t\tif ( !noPropagation ) {\n\t\t\tthis._trigger( \"beforeStop\", event, this._uiHash() );\n\t\t}\n\n\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately,\n\t\t// it unbinds ALL events from the original node!\n\t\tthis.placeholder[ 0 ].parentNode.removeChild( this.placeholder[ 0 ] );\n\n\t\tif ( !this.cancelHelperRemoval ) {\n\t\t\tif ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {\n\t\t\t\tthis.helper.remove();\n\t\t\t}\n\t\t\tthis.helper = null;\n\t\t}\n\n\t\tif ( !noPropagation ) {\n\t\t\tfor ( i = 0; i < delayedTriggers.length; i++ ) {\n\n\t\t\t\t// Trigger all delayed events\n\t\t\t\tdelayedTriggers[ i ].call( this, event );\n\t\t\t}\n\t\t\tthis._trigger( \"stop\", event, this._uiHash() );\n\t\t}\n\n\t\tthis.fromOutside = false;\n\t\treturn !this.cancelHelperRemoval;\n\n\t},\n\n\t_trigger: function() {\n\t\tif ( $.Widget.prototype._trigger.apply( this, arguments ) === false ) {\n\t\t\tthis.cancel();\n\t\t}\n\t},\n\n\t_uiHash: function( _inst ) {\n\t\tvar inst = _inst || this;\n\t\treturn {\n\t\t\thelper: inst.helper,\n\t\t\tplaceholder: inst.placeholder || $( [] ),\n\t\t\tposition: inst.position,\n\t\t\toriginalPosition: inst.originalPosition,\n\t\t\toffset: inst.positionAbs,\n\t\t\titem: inst.currentItem,\n\t\t\tsender: _inst ? _inst.element : null\n\t\t};\n\t}\n\n} );\n\n} ) );\n"]}