{"version":3,"sources":["public/src/modules/iconSelect.js"],"names":["define","Benchpress","iconSelect","init","el","onModified","doubleSize","hasClass","selected","attr","replace","$","removeClass","addClass","err","render","then","html","find","prepend","picker","bootbox","dialog","onEscape","backdrop","show","message","title","buttons","noIcon","label","className","callback","val","success","iconClass","categoryIconClass","on","modalEl","this","searchEl","modal","icons","submitEl","changeSelection","newSelection","length","first","selectRange","e","keyCode","each","idx","match","RegExp","hide","click"],"mappings":"AAAA,aAGAA,OAAO,cAAe,cAAe,SAAUC,GAC9C,IAAIC,KAEJA,EAAWC,KAAO,SAAUC,EAAIC,GAC/BA,EAAaA,GAAc,aAC3B,IAAIC,EAAaF,EAAGG,SAAS,SAC7B,IAAIC,EAAWJ,EAAGK,KAAK,SAASC,QAAQ,QAAS,IAAIA,QAAQ,KAAM,IAAIA,QAAQ,OAAQ,IAEvFC,EAAE,oBAAoBC,YAAY,YAElC,GAAIJ,EAAU,CACb,IACCG,EAAE,wBAA0BH,GAAUK,SAAS,YAC9C,MAAOC,GACRN,EAAW,IAIbP,EAAWc,OAAO,2BAA4BC,KAAK,SAAUC,GAC5DA,EAAON,EAAEM,GACTA,EAAKC,KAAK,aAAaC,QAAQR,EAAE,mCAEjC,IAAIS,EAASC,QAAQC,QACpBC,SAAU,KACVC,SAAU,KACVC,KAAM,MACNC,QAAST,EACTU,MAAO,iBACPC,SACCC,QACCC,MAAO,UACPC,UAAW,cACXC,SAAU,WACT5B,EAAGK,KAAK,QAAS,OAASH,EAAa,SAAW,KAClDF,EAAG6B,IAAI,IACP7B,EAAGK,KAAK,QAAS,IAEjBJ,EAAWD,KAGb8B,SACCJ,MAAO,SACPC,UAAW,cACXC,SAAU,WACT,IAAIG,EAAYxB,EAAE,sBAAsBF,KAAK,SAC7C,IAAI2B,EAAoBzB,EAAE,eAAeE,SAASsB,GAAWvB,YAAY,MAAMA,YAAY,YACzFH,KAAK,SAEP,GAAI2B,EAAmB,CACtBhC,EAAGK,KAAK,QAAS,OAASH,EAAa,SAAW,IAAM8B,GACxDhC,EAAG6B,IAAIG,GACPhC,EAAGK,KAAK,QAAS2B,GAGlB/B,EAAWD,QAMfgB,EAAOiB,GAAG,gBAAiB,WAC1B,IAAIC,EAAU3B,EAAE4B,MAChB,IAAIC,EAAWF,EAAQpB,KAAK,SAE5B,GAAIV,EAAU,CACb8B,EAAQpB,KAAK,IAAMV,GAAUK,SAAS,YACtC2B,EAASP,IAAIzB,EAASE,QAAQ,MAAO,QAEpC+B,MAAM,QAETrB,EAAOiB,GAAG,iBAAkB,WAC3B,IAAIC,EAAU3B,EAAE4B,MAChB,IAAIC,EAAWF,EAAQpB,KAAK,SAC5B,IAAIwB,EAAQJ,EAAQpB,KAAK,eACzB,IAAIyB,EAAWL,EAAQpB,KAAK,sBAE5B,SAAS0B,EAAgBC,GACxBP,EAAQpB,KAAK,cAAcN,YAAY,YACvC,GAAIiC,EAAc,CACjBA,EAAahC,SAAS,iBAChB,GAAI2B,EAASP,MAAMa,SAAW,EAAG,CACvC,GAAItC,EAAU,CACb8B,EAAQpB,KAAK,IAAMV,GAAUK,SAAS,iBAEjC,CACNyB,EAAQpB,KAAK,aAAa6B,QAAQlC,SAAS,aAK7C2B,EAASQ,YAAY,EAAGR,EAASP,MAAMa,QAEvCR,EAAQpB,KAAK,mBAAmBmB,GAAG,QAAS,IAAK,WAChDG,EAASP,IAAItB,EAAE4B,MAAM9B,KAAK,SAASC,QAAQ,SAAU,IAAIA,QAAQ,WAAY,KAC7EkC,EAAgBjC,EAAE4B,SAGnBC,EAASH,GAAG,QAAS,SAAUY,GAC9B,GAAIA,EAAEC,UAAY,GAAI,CAErBR,EAAMjB,OACNiB,EAAMS,KAAK,SAAUC,EAAKhD,GACzB,IAAKA,EAAG2B,UAAUsB,MAAM,IAAIC,OAAO,YAAcd,EAASP,MAAQ,QAAS,CAC1EtB,EAAEP,GAAImD,UAGRX,QACM,CACND,EAASa,gBAOd,OAAOtD","file":"public/src/modules/iconSelect.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('iconSelect', ['benchpress'], function (Benchpress) {\r\n\tvar iconSelect = {};\r\n\r\n\ticonSelect.init = function (el, onModified) {\r\n\t\tonModified = onModified || function () {};\r\n\t\tvar doubleSize = el.hasClass('fa-2x');\r\n\t\tvar selected = el.attr('class').replace('fa-2x', '').replace('fa', '').replace(/\\s+/g, '');\r\n\r\n\t\t$('#icons .selected').removeClass('selected');\r\n\r\n\t\tif (selected) {\r\n\t\t\ttry {\r\n\t\t\t\t$('#icons .fa-icons .fa.' + selected).addClass('selected');\r\n\t\t\t} catch (err) {\r\n\t\t\t\tselected = '';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tBenchpress.render('partials/fontawesome', {}).then(function (html) {\r\n\t\t\thtml = $(html);\r\n\t\t\thtml.find('.fa-icons').prepend($('<i class=\"fa fa-nbb-none\"></i>'));\r\n\r\n\t\t\tvar picker = bootbox.dialog({\r\n\t\t\t\tonEscape: true,\r\n\t\t\t\tbackdrop: true,\r\n\t\t\t\tshow: false,\r\n\t\t\t\tmessage: html,\r\n\t\t\t\ttitle: 'Select an Icon',\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tnoIcon: {\r\n\t\t\t\t\t\tlabel: 'No Icon',\r\n\t\t\t\t\t\tclassName: 'btn-default',\r\n\t\t\t\t\t\tcallback: function () {\r\n\t\t\t\t\t\t\tel.attr('class', 'fa ' + (doubleSize ? 'fa-2x ' : ''));\r\n\t\t\t\t\t\t\tel.val('');\r\n\t\t\t\t\t\t\tel.attr('value', '');\r\n\r\n\t\t\t\t\t\t\tonModified(el);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: {\r\n\t\t\t\t\t\tlabel: 'Select',\r\n\t\t\t\t\t\tclassName: 'btn-primary',\r\n\t\t\t\t\t\tcallback: function () {\r\n\t\t\t\t\t\t\tvar iconClass = $('.bootbox .selected').attr('class');\r\n\t\t\t\t\t\t\tvar categoryIconClass = $('<div></div>').addClass(iconClass).removeClass('fa').removeClass('selected')\r\n\t\t\t\t\t\t\t\t.attr('class');\r\n\r\n\t\t\t\t\t\t\tif (categoryIconClass) {\r\n\t\t\t\t\t\t\t\tel.attr('class', 'fa ' + (doubleSize ? 'fa-2x ' : '') + categoryIconClass);\r\n\t\t\t\t\t\t\t\tel.val(categoryIconClass);\r\n\t\t\t\t\t\t\t\tel.attr('value', categoryIconClass);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tonModified(el);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tpicker.on('show.bs.modal', function () {\r\n\t\t\t\tvar modalEl = $(this);\r\n\t\t\t\tvar searchEl = modalEl.find('input');\r\n\r\n\t\t\t\tif (selected) {\r\n\t\t\t\t\tmodalEl.find('.' + selected).addClass('selected');\r\n\t\t\t\t\tsearchEl.val(selected.replace('fa-', ''));\r\n\t\t\t\t}\r\n\t\t\t}).modal('show');\r\n\r\n\t\t\tpicker.on('shown.bs.modal', function () {\r\n\t\t\t\tvar modalEl = $(this);\r\n\t\t\t\tvar searchEl = modalEl.find('input');\r\n\t\t\t\tvar icons = modalEl.find('.fa-icons i');\r\n\t\t\t\tvar submitEl = modalEl.find('button.btn-primary');\r\n\r\n\t\t\t\tfunction changeSelection(newSelection) {\r\n\t\t\t\t\tmodalEl.find('i.selected').removeClass('selected');\r\n\t\t\t\t\tif (newSelection) {\r\n\t\t\t\t\t\tnewSelection.addClass('selected');\r\n\t\t\t\t\t} else if (searchEl.val().length === 0) {\r\n\t\t\t\t\t\tif (selected) {\r\n\t\t\t\t\t\t\tmodalEl.find('.' + selected).addClass('selected');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmodalEl.find('i:visible').first().addClass('selected');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Focus on the input box\r\n\t\t\t\tsearchEl.selectRange(0, searchEl.val().length);\r\n\r\n\t\t\t\tmodalEl.find('.icon-container').on('click', 'i', function () {\r\n\t\t\t\t\tsearchEl.val($(this).attr('class').replace('fa fa-', '').replace('selected', ''));\r\n\t\t\t\t\tchangeSelection($(this));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsearchEl.on('keyup', function (e) {\r\n\t\t\t\t\tif (e.keyCode !== 13) {\r\n\t\t\t\t\t\t// Filter\r\n\t\t\t\t\t\ticons.show();\r\n\t\t\t\t\t\ticons.each(function (idx, el) {\r\n\t\t\t\t\t\t\tif (!el.className.match(new RegExp('^fa fa-.*' + searchEl.val() + '.*$'))) {\r\n\t\t\t\t\t\t\t\t$(el).hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tchangeSelection();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsubmitEl.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\treturn iconSelect;\r\n});\r\n"]}