{"version":3,"sources":["public/src/modules/settings/object.js"],"names":["define","SettingsObject","helper","addObjectPropertyElement","field","key","attributes","prop","value","separator","insertCb","prepend","append","type","element","deepClone","$","createElementOfType","tagName","attr","name","hasOwnProperty","val","search","data","substring","fillField","length","types","use","this","create","ignored","createElement","set","properties","propertyIndex","propertyName","_error","document","createTextNode","empty","Array","isArray","undefined","clone","el","get","trim","each","i","property","readValue","isTrue","Object","keys"],"mappings":"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","file":"public/src/modules/settings/object.js","sourcesContent":["'use strict';\r\n\r\ndefine('settings/object', function () {\r\n\tvar SettingsObject;\r\n\tvar helper = null;\r\n\r\n\t/**\r\n\t Creates a new child-element of given property with given data and calls given callback with elements to add.\r\n\t @param field Any wrapper that contains all properties of the object.\r\n\t @param key The key of the object.\r\n\t @param attributes The attributes to call {@link Settings.helper.createElementOfType} with or to add as\r\n\t element-attributes.\r\n\t @param value The value to call {@link Settings.helper.fillField} with.\r\n\t @param separator The separator to use.\r\n\t @param insertCb The callback to insert the elements.\r\n\t */\r\n\tfunction addObjectPropertyElement(field, key, attributes, prop, value, separator, insertCb) {\r\n\t\tvar prepend = attributes['data-prepend'];\r\n\t\tvar append = attributes['data-append'];\r\n\t\tvar type;\r\n\t\tvar element;\r\n\t\tdelete attributes['data-prepend'];\r\n\t\tdelete attributes['data-append'];\r\n\t\tattributes = helper.deepClone(attributes);\r\n\t\ttype = attributes['data-type'] || attributes.type || 'text';\r\n\t\telement = $(helper.createElementOfType(type, attributes.tagName, attributes));\r\n\t\telement.attr('data-parent', '_' + key);\r\n\t\telement.attr('data-prop', prop);\r\n\t\tdelete attributes['data-type'];\r\n\t\tdelete attributes.tagName;\r\n\t\tfor (var name in attributes) {\r\n\t\t\tif (attributes.hasOwnProperty(name)) {\r\n\t\t\t\tvar val = attributes[name];\r\n\t\t\t\tif (name.search('data-') === 0) {\r\n\t\t\t\t\telement.data(name.substring(5), val);\r\n\t\t\t\t} else if (name.search('prop-') === 0) {\r\n\t\t\t\t\telement.prop(name.substring(5), val);\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.attr(name, val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\thelper.fillField(element, value);\r\n\t\tif ($('[data-parent=\"_' + key + '\"]', field).length) {\r\n\t\t\tinsertCb(separator);\r\n\t\t}\r\n\t\tif (prepend) {\r\n\t\t\tinsertCb(prepend);\r\n\t\t}\r\n\t\tinsertCb(element);\r\n\t\tif (append) {\r\n\t\t\tinsertCb(append);\r\n\t\t}\r\n\t}\r\n\r\n\tSettingsObject = {\r\n\t\ttypes: ['object'],\r\n\t\tuse: function () {\r\n\t\t\thelper = this.helper;\r\n\t\t},\r\n\t\tcreate: function (ignored, tagName) {\r\n\t\t\treturn helper.createElement(tagName || 'div');\r\n\t\t},\r\n\t\tset: function (element, value) {\r\n\t\t\tvar properties = element.data('attributes') || element.data('properties');\r\n\t\t\tvar key = element.data('key') || element.data('parent');\r\n\t\t\tvar separator = element.data('split') || ', ';\r\n\t\t\tvar propertyIndex;\r\n\t\t\tvar propertyName;\r\n\t\t\tvar attributes;\r\n\t\t\tseparator = (function () {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn $(separator);\r\n\t\t\t\t} catch (_error) {\r\n\t\t\t\t\treturn $(document.createTextNode(separator));\r\n\t\t\t\t}\r\n\t\t\t}());\r\n\t\t\telement.empty();\r\n\t\t\tif (typeof value !== 'object') {\r\n\t\t\t\tvalue = {};\r\n\t\t\t}\r\n\t\t\tif (Array.isArray(properties)) {\r\n\t\t\t\tfor (propertyIndex in properties) {\r\n\t\t\t\t\tif (properties.hasOwnProperty(propertyIndex)) {\r\n\t\t\t\t\t\tattributes = properties[propertyIndex];\r\n\t\t\t\t\t\tif (typeof attributes !== 'object') {\r\n\t\t\t\t\t\t\tattributes = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpropertyName = attributes['data-prop'] || attributes['data-property'] || propertyIndex;\r\n\t\t\t\t\t\tif (value[propertyName] === undefined && attributes['data-new'] !== undefined) {\r\n\t\t\t\t\t\t\tvalue[propertyName] = attributes['data-new'];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taddObjectPropertyElement(\r\n\t\t\t\t\t\t\telement,\r\n\t\t\t\t\t\t\tkey,\r\n\t\t\t\t\t\t\tattributes,\r\n\t\t\t\t\t\t\tpropertyName,\r\n\t\t\t\t\t\t\tvalue[propertyName],\r\n\t\t\t\t\t\t\tseparator.clone(),\r\n\t\t\t\t\t\t\tfunction (el) { element.append(el); }\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tget: function (element, trim, empty) {\r\n\t\t\tvar key = element.data('key') || element.data('parent');\r\n\t\t\tvar properties = $('[data-parent=\"_' + key + '\"]', element);\r\n\t\t\tvar value = {};\r\n\t\t\tproperties.each(function (i, property) {\r\n\t\t\t\tproperty = $(property);\r\n\t\t\t\tvar val = helper.readValue(property);\r\n\t\t\t\tvar prop = property.data('prop');\r\n\t\t\t\tvar empty = helper.isTrue(property.data('empty'));\r\n\t\t\t\tif (empty || (val !== undefined && (val == null || val.length !== 0))) {\r\n\t\t\t\t\tvalue[prop] = val;\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (empty || Object.keys(value).length) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\treturn SettingsObject;\r\n});\r\n"]}