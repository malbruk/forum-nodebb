"use strict";define("categorySelector",["categorySearch","bootbox"],function(e,t){var o={};o.init=function(t,o){if(!t||!t.length){return}o=o||{};var n=o.onSelect||function(){};o.states=o.states||["watching","notwatching","ignoring"];o.template="partials/category-selector";$(window).trigger("action:category.selector.options",{el:t,options:o});e.init(t,o);var a={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){var e=$(this);if(e.hasClass("disabled")){return false}a.selectCategory(e.attr("data-cid"));n(a.selectedCategory)});a.selectCategory=function(e){var t=a.el.find('[data-cid="'+e+'"]');a.selectedCategory={cid:e,name:t.attr("data-name")};if(t.length){a.el.find('[component="category-selector-selected"]').html(t.find('[component="category-markup"]').html())}else{a.el.find('[component="category-selector-selected"]').translateHtml(o.selectCategoryLabel||"[[topic:thread_tools.select_category]]")}};a.getSelectedCategory=function(){return a.selectedCategory};a.getSelectedCid=function(){return a.selectedCategory?a.selectedCategory.cid:0};return a};o.modal=function(e){e=e||{};e.onSelect=e.onSelect||function(){};e.onSubmit=e.onSubmit||function(){};app.parseAndTranslate("admin/partials/categories/select-category",{},function(n){var a=t.dialog({title:"[[modules:composer.select_category]]",message:n,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:r}}});var c=o.init(a.find('[component="category-selector"]'),e);function r(t){t.preventDefault();if(c.selectedCategory){e.onSubmit(c.selectedCategory);a.modal("hide")}return false}if(e.openOnLoad){a.on("shown.bs.modal",function(){a.find(".dropdown-toggle").dropdown("toggle")})}a.find("form").on("submit",r)})};return o});
//# sourceMappingURL=categorySelector.js.map