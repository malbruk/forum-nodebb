{"version":3,"sources":["public/src/modules/helpers.js"],"names":["factory","module","exports","relative_path","require","get","define","amd","Benchpress","utils","config","setGlobal","helpers","displayMenuItem","buildMetaTag","buildLinkTag","stringify","escape","stripTags","generateCategoryBackground","generateChildrenCategories","generateTopicClass","membershipBtn","spawnPrivilegeStates","localeToHTML","renderTopicImage","renderDigestAvatar","userAgentIcons","buildAvatar","register","__escape","identity","str","data","index","item","navigation","route","match","user","privileges","tag","name","property","content","replace","link","rel","as","type","href","sizes","title","obj","JSON","escapeHTML","stripHTMLTags","category","style","bgColor","push","color","backgroundImage","imageClass","join","html","children","length","forEach","child","isSection","slug","icon","topic","locked","pinned","deleted","unread","scheduled","groupObj","isMember","displayName","disableLeave","isPending","isInvited","disableJoinRequests","member","states","priv","hasOwnProperty","state","map","guestDisabled","spidersEnabled","globalModDisabled","disabled","includes","startsWith","locale","fallback","topicObj","thumb","username","uid","picture","block","teaser","icons","platform","browser","userObj","size","rounded","classNames","component","this","attributes","styles","isNaN","parseInt","unshift","Object","keys","helperName","registerHelper"],"mappings":"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","file":"public/src/modules/helpers.js","sourcesContent":["'use strict';\r\n\r\n(function (factory) {\r\n\tif (typeof module === 'object' && module.exports) {\r\n\t\tvar relative_path = require('nconf').get('relative_path');\r\n\t\tmodule.exports = factory(require('../utils'), require('benchpressjs'), relative_path);\r\n\t} else if (typeof define === 'function' && define.amd) {\r\n\t\tdefine('helpers', ['benchpress'], function (Benchpress) {\r\n\t\t\treturn factory(utils, Benchpress, config.relative_path);\r\n\t\t});\r\n\t}\r\n}(function (utils, Benchpress, relative_path) {\r\n\tBenchpress.setGlobal('true', true);\r\n\tBenchpress.setGlobal('false', false);\r\n\r\n\tvar helpers = {\r\n\t\tdisplayMenuItem: displayMenuItem,\r\n\t\tbuildMetaTag: buildMetaTag,\r\n\t\tbuildLinkTag: buildLinkTag,\r\n\t\tstringify: stringify,\r\n\t\tescape: escape,\r\n\t\tstripTags: stripTags,\r\n\t\tgenerateCategoryBackground: generateCategoryBackground,\r\n\t\tgenerateChildrenCategories: generateChildrenCategories,\r\n\t\tgenerateTopicClass: generateTopicClass,\r\n\t\tmembershipBtn: membershipBtn,\r\n\t\tspawnPrivilegeStates: spawnPrivilegeStates,\r\n\t\tlocaleToHTML: localeToHTML,\r\n\t\trenderTopicImage: renderTopicImage,\r\n\t\trenderDigestAvatar: renderDigestAvatar,\r\n\t\tuserAgentIcons: userAgentIcons,\r\n\t\tbuildAvatar: buildAvatar,\r\n\t\tregister: register,\r\n\t\t__escape: identity,\r\n\t};\r\n\r\n\tfunction identity(str) {\r\n\t\treturn str;\r\n\t}\r\n\r\n\tfunction displayMenuItem(data, index) {\r\n\t\tvar item = data.navigation[index];\r\n\t\tif (!item) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (item.route.match('/users') && data.user && !data.user.privileges['view:users']) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (item.route.match('/tags') && data.user && !data.user.privileges['view:tags']) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (item.route.match('/groups') && data.user && !data.user.privileges['view:groups']) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction buildMetaTag(tag) {\r\n\t\tvar name = tag.name ? 'name=\"' + tag.name + '\" ' : '';\r\n\t\tvar property = tag.property ? 'property=\"' + tag.property + '\" ' : '';\r\n\t\tvar content = tag.content ? 'content=\"' + tag.content.replace(/\\n/g, ' ') + '\" ' : '';\r\n\r\n\t\treturn '<meta ' + name + property + content + '/>\\n\\t';\r\n\t}\r\n\r\n\tfunction buildLinkTag(tag) {\r\n\t\tvar link = tag.link ? 'link=\"' + tag.link + '\" ' : '';\r\n\t\tvar rel = tag.rel ? 'rel=\"' + tag.rel + '\" ' : '';\r\n\t\tvar as = tag.as ? 'as=\"' + tag.as + '\" ' : '';\r\n\t\tvar type = tag.type ? 'type=\"' + tag.type + '\" ' : '';\r\n\t\tvar href = tag.href ? 'href=\"' + tag.href + '\" ' : '';\r\n\t\tvar sizes = tag.sizes ? 'sizes=\"' + tag.sizes + '\" ' : '';\r\n\t\tvar title = tag.title ? 'title=\"' + tag.title + '\" ' : '';\r\n\r\n\t\treturn '<link ' + link + rel + as + type + sizes + title + href + '/>\\n\\t';\r\n\t}\r\n\r\n\tfunction stringify(obj) {\r\n\t\t// Turns the incoming object into a JSON string\r\n\t\treturn JSON.stringify(obj).replace(/&/gm, '&amp;').replace(/</gm, '&lt;').replace(/>/gm, '&gt;')\r\n\t\t\t.replace(/\"/g, '&quot;');\r\n\t}\r\n\r\n\tfunction escape(str) {\r\n\t\treturn utils.escapeHTML(str);\r\n\t}\r\n\r\n\tfunction stripTags(str) {\r\n\t\treturn utils.stripHTMLTags(str);\r\n\t}\r\n\r\n\tfunction generateCategoryBackground(category) {\r\n\t\tif (!category) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tvar style = [];\r\n\r\n\t\tif (category.bgColor) {\r\n\t\t\tstyle.push('background-color: ' + category.bgColor);\r\n\t\t}\r\n\r\n\t\tif (category.color) {\r\n\t\t\tstyle.push('color: ' + category.color);\r\n\t\t}\r\n\r\n\t\tif (category.backgroundImage) {\r\n\t\t\tstyle.push('background-image: url(' + category.backgroundImage + ')');\r\n\t\t\tif (category.imageClass) {\r\n\t\t\t\tstyle.push('background-size: ' + category.imageClass);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn style.join('; ') + ';';\r\n\t}\r\n\r\n\tfunction generateChildrenCategories(category) {\r\n\t\tvar html = '';\r\n\t\tif (!category || !category.children || !category.children.length) {\r\n\t\t\treturn html;\r\n\t\t}\r\n\t\tcategory.children.forEach(function (child) {\r\n\t\t\tif (child && !child.isSection) {\r\n\t\t\t\tvar link = child.link ? child.link : (relative_path + '/category/' + child.slug);\r\n\t\t\t\thtml += '<span class=\"category-children-item pull-left\">' +\r\n\t\t\t\t\t'<div role=\"presentation\" class=\"icon pull-left\" style=\"' + generateCategoryBackground(child) + '\">' +\r\n\t\t\t\t\t'<i class=\"fa fa-fw ' + child.icon + '\"></i>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'<a href=\"' + link + '\"><small>' + child.name + '</small></a></span>';\r\n\t\t\t}\r\n\t\t});\r\n\t\thtml = html ? ('<span class=\"category-children\">' + html + '</span>') : html;\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction generateTopicClass(topic) {\r\n\t\tvar style = [];\r\n\r\n\t\tif (topic.locked) {\r\n\t\t\tstyle.push('locked');\r\n\t\t}\r\n\r\n\t\tif (topic.pinned) {\r\n\t\t\tstyle.push('pinned');\r\n\t\t}\r\n\r\n\t\tif (topic.deleted) {\r\n\t\t\tstyle.push('deleted');\r\n\t\t}\r\n\r\n\t\tif (topic.unread) {\r\n\t\t\tstyle.push('unread');\r\n\t\t}\r\n\r\n\t\tif (topic.scheduled) {\r\n\t\t\tstyle.push('scheduled');\r\n\t\t}\r\n\r\n\t\treturn style.join(' ');\r\n\t}\r\n\r\n\t// Groups helpers\r\n\tfunction membershipBtn(groupObj) {\r\n\t\tif (groupObj.isMember && groupObj.name !== 'administrators') {\r\n\t\t\treturn '<button class=\"btn btn-danger\" data-action=\"leave\" data-group=\"' + groupObj.displayName + '\"' + (groupObj.disableLeave ? ' disabled' : '') + '><i class=\"fa fa-times\"></i> [[groups:membership.leave-group]]</button>';\r\n\t\t}\r\n\r\n\t\tif (groupObj.isPending && groupObj.name !== 'administrators') {\r\n\t\t\treturn '<button class=\"btn btn-warning disabled\"><i class=\"fa fa-clock-o\"></i> [[groups:membership.invitation-pending]]</button>';\r\n\t\t} else if (groupObj.isInvited) {\r\n\t\t\treturn '<button class=\"btn btn-link\" data-action=\"rejectInvite\" data-group=\"' + groupObj.displayName + '\">[[groups:membership.reject]]</button><button class=\"btn btn-success\" data-action=\"acceptInvite\" data-group=\"' + groupObj.name + '\"><i class=\"fa fa-plus\"></i> [[groups:membership.accept-invitation]]</button>';\r\n\t\t} else if (!groupObj.disableJoinRequests && groupObj.name !== 'administrators') {\r\n\t\t\treturn '<button class=\"btn btn-success\" data-action=\"join\" data-group=\"' + groupObj.displayName + '\"><i class=\"fa fa-plus\"></i> [[groups:membership.join-group]]</button>';\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tfunction spawnPrivilegeStates(member, privileges) {\r\n\t\tvar states = [];\r\n\t\tfor (var priv in privileges) {\r\n\t\t\tif (privileges.hasOwnProperty(priv)) {\r\n\t\t\t\tstates.push({\r\n\t\t\t\t\tname: priv,\r\n\t\t\t\t\tstate: privileges[priv],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn states.map(function (priv) {\r\n\t\t\tvar guestDisabled = ['groups:moderate', 'groups:posts:upvote', 'groups:posts:downvote', 'groups:local:login', 'groups:group:create'];\r\n\t\t\tvar spidersEnabled = ['groups:find', 'groups:read', 'groups:topics:read', 'groups:view:users', 'groups:view:tags', 'groups:view:groups'];\r\n\t\t\tvar globalModDisabled = ['groups:moderate'];\r\n\t\t\tvar disabled =\r\n\t\t\t\t(member === 'guests' && (guestDisabled.includes(priv.name) || priv.name.startsWith('groups:admin:'))) ||\r\n\t\t\t\t(member === 'spiders' && !spidersEnabled.includes(priv.name)) ||\r\n\t\t\t\t(member === 'Global Moderators' && globalModDisabled.includes(priv.name));\r\n\r\n\t\t\treturn '<td class=\"text-center\" data-privilege=\"' + priv.name + '\" data-value=\"' + priv.state + '\"><input autocomplete=\"off\" type=\"checkbox\"' + (priv.state ? ' checked' : '') + (disabled ? ' disabled=\"disabled\"' : '') + ' /></td>';\r\n\t\t}).join('');\r\n\t}\r\n\r\n\tfunction localeToHTML(locale, fallback) {\r\n\t\tlocale = locale || fallback || 'en-GB';\r\n\t\treturn locale.replace('_', '-');\r\n\t}\r\n\r\n\tfunction renderTopicImage(topicObj) {\r\n\t\tif (topicObj.thumb) {\r\n\t\t\treturn '<img src=\"' + topicObj.thumb + '\" class=\"img-circle user-img\" title=\"' + topicObj.user.username + '\" />';\r\n\t\t}\r\n\t\treturn '<img component=\"user/picture\" data-uid=\"' + topicObj.user.uid + '\" src=\"' + topicObj.user.picture + '\" class=\"user-img\" title=\"' + topicObj.user.username + '\" />';\r\n\t}\r\n\r\n\tfunction renderDigestAvatar(block) {\r\n\t\tif (block.teaser) {\r\n\t\t\tif (block.teaser.user.picture) {\r\n\t\t\t\treturn '<img style=\"vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;\" src=\"' + block.teaser.user.picture + '\" title=\"' + block.teaser.user.username + '\" />';\r\n\t\t\t}\r\n\t\t\treturn '<div style=\"vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: ' + block.teaser.user['icon:bgColor'] + '; color: white; text-align: center; display: inline-block; border-radius: 50%;\">' + block.teaser.user['icon:text'] + '</div>';\r\n\t\t}\r\n\t\tif (block.user.picture) {\r\n\t\t\treturn '<img style=\"vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;\" src=\"' + block.user.picture + '\" title=\"' + block.user.username + '\" />';\r\n\t\t}\r\n\t\treturn '<div style=\"vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: ' + block.user['icon:bgColor'] + '; color: white; text-align: center; display: inline-block; border-radius: 50%;\">' + block.user['icon:text'] + '</div>';\r\n\t}\r\n\r\n\tfunction userAgentIcons(data) {\r\n\t\tvar icons = '';\r\n\r\n\t\tswitch (data.platform) {\r\n\t\t\tcase 'Linux':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-linux\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Microsoft Windows':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-windows\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Apple Mac':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-apple\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Android':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-android\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'iPad':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-tablet\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'iPod':\t// intentional fall-through\r\n\t\t\tcase 'iPhone':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-mobile\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-question-circle\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tswitch (data.browser) {\r\n\t\t\tcase 'Chrome':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-chrome\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Firefox':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-firefox\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Safari':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-safari\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'IE':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-internet-explorer\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Edge':\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-edge\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\ticons += '<i class=\"fa fa-fw fa-question-circle\"></i>';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn icons;\r\n\t}\r\n\r\n\tfunction buildAvatar(userObj, size, rounded, classNames, component) {\r\n\t\t/**\r\n\t\t * userObj requires:\r\n\t\t *   - uid, picture, icon:bgColor, icon:text (getUserField w/ \"picture\" should return all 4), username\r\n\t\t * size: one of \"xs\", \"sm\", \"md\", \"lg\", or \"xl\" (required), or an integer\r\n\t\t * rounded: true or false (optional, default false)\r\n\t\t * classNames: additional class names to prepend (optional, default none)\r\n\t\t * component: overrides the default component (optional, default none)\r\n\t\t */\r\n\r\n\t\t// Try to use root context if passed-in userObj is undefined\r\n\t\tif (!userObj) {\r\n\t\t\tuserObj = this;\r\n\t\t}\r\n\r\n\t\tvar attributes = [\r\n\t\t\t'alt=\"' + userObj.username + '\"',\r\n\t\t\t'title=\"' + userObj.username + '\"',\r\n\t\t\t'data-uid=\"' + userObj.uid + '\"',\r\n\t\t\t'loading=\"lazy\"',\r\n\t\t];\r\n\t\tvar styles = [];\r\n\t\tclassNames = classNames || '';\r\n\r\n\t\t// Validate sizes, handle integers, otherwise fall back to `avatar-sm`\r\n\t\tif (['xs', 'sm', 'sm2x', 'md', 'lg', 'xl'].includes(size)) {\r\n\t\t\tclassNames += ' avatar-' + size;\r\n\t\t} else if (!isNaN(parseInt(size, 10))) {\r\n\t\t\tstyles.push('width: ' + size + 'px;', 'height: ' + size + 'px;', 'line-height: ' + size + 'px;', 'font-size: ' + (parseInt(size, 10) / 16) + 'rem;');\r\n\t\t} else {\r\n\t\t\tclassNames += ' avatar-sm';\r\n\t\t}\r\n\t\tattributes.unshift('class=\"avatar ' + classNames + (rounded ? ' avatar-rounded' : '') + '\"');\r\n\r\n\t\t// Component override\r\n\t\tif (component) {\r\n\t\t\tattributes.push('component=\"' + component + '\"');\r\n\t\t} else {\r\n\t\t\tattributes.push('component=\"avatar/' + (userObj.picture ? 'picture' : 'icon') + '\"');\r\n\t\t}\r\n\r\n\t\tif (userObj.picture) {\r\n\t\t\treturn '<img ' + attributes.join(' ') + ' src=\"' + userObj.picture + '\" style=\"' + styles.join(' ') + '\" />';\r\n\t\t}\r\n\r\n\t\tstyles.push('background-color: ' + userObj['icon:bgColor'] + ';');\r\n\t\treturn '<span ' + attributes.join(' ') + ' style=\"' + styles.join(' ') + '\">' + userObj['icon:text'] + '</span>';\r\n\t}\r\n\r\n\tfunction register() {\r\n\t\tObject.keys(helpers).forEach(function (helperName) {\r\n\t\t\tBenchpress.registerHelper(helperName, helpers[helperName]);\r\n\t\t});\r\n\t}\r\n\r\n\treturn helpers;\r\n}));\r\n"]}