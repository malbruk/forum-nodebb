{"version":3,"sources":["public/src/admin/appearance/customise.js"],"names":["define","Settings","ace","Customise","init","prepare","$","text","val","customCSS","edit","customJS","customHTML","setTheme","getSession","setMode","on","app","flags","_unsaved","getValue","is","socket","emit"],"mappings":"AAAA,aAEAA,OAAO,8BAA+B,iBAAkB,WAAY,SAAUC,EAAUC,GACvF,IAAIC,KAEJA,EAAUC,KAAO,WAChBH,EAASI,QAAQ,WAChBC,EAAE,cAAcC,KAAKD,EAAE,qBAAqBE,OAC5CF,EAAE,aAAaC,KAAKD,EAAE,oBAAoBE,OAC1CF,EAAE,eAAeC,KAAKD,EAAE,sBAAsBE,OAE9C,IAAIC,EAAYP,EAAIQ,KAAK,aACzB,IAAIC,EAAWT,EAAIQ,KAAK,YACxB,IAAIE,EAAaV,EAAIQ,KAAK,cAE1BD,EAAUI,SAAS,sBACnBJ,EAAUK,aAAaC,QAAQ,iBAE/BN,EAAUO,GAAG,SAAU,WACtBC,IAAIC,MAAQD,IAAIC,UAChBD,IAAIC,MAAMC,SAAW,KACrBb,EAAE,qBAAqBE,IAAIC,EAAUW,cAGtCT,EAASE,SAAS,sBAClBF,EAASG,aAAaC,QAAQ,uBAE9BJ,EAASK,GAAG,SAAU,WACrBC,IAAIC,MAAQD,IAAIC,UAChBD,IAAIC,MAAMC,SAAW,KACrBb,EAAE,oBAAoBE,IAAIG,EAASS,cAGpCR,EAAWC,SAAS,sBACpBD,EAAWE,aAAaC,QAAQ,iBAEhCH,EAAWI,GAAG,SAAU,WACvBC,IAAIC,MAAQD,IAAIC,UAChBD,IAAIC,MAAMC,SAAW,KACrBb,EAAE,sBAAsBE,IAAII,EAAWQ,cAGxCd,EAAE,SAASU,GAAG,QAAS,WACtB,GAAIV,EAAE,qBAAqBe,GAAG,YAAa,CAC1CC,OAAOC,KAAK,iCAMhB,OAAOpB","file":"public/src/admin/appearance/customise.js","sourcesContent":["'use strict';\r\n\r\ndefine('admin/appearance/customise', ['admin/settings', 'ace/ace'], function (Settings, ace) {\r\n\tvar Customise = {};\r\n\r\n\tCustomise.init = function () {\r\n\t\tSettings.prepare(function () {\r\n\t\t\t$('#customCSS').text($('#customCSS-holder').val());\r\n\t\t\t$('#customJS').text($('#customJS-holder').val());\r\n\t\t\t$('#customHTML').text($('#customHTML-holder').val());\r\n\r\n\t\t\tvar customCSS = ace.edit('customCSS');\r\n\t\t\tvar customJS = ace.edit('customJS');\r\n\t\t\tvar customHTML = ace.edit('customHTML');\r\n\r\n\t\t\tcustomCSS.setTheme('ace/theme/twilight');\r\n\t\t\tcustomCSS.getSession().setMode('ace/mode/less');\r\n\r\n\t\t\tcustomCSS.on('change', function () {\r\n\t\t\t\tapp.flags = app.flags || {};\r\n\t\t\t\tapp.flags._unsaved = true;\r\n\t\t\t\t$('#customCSS-holder').val(customCSS.getValue());\r\n\t\t\t});\r\n\r\n\t\t\tcustomJS.setTheme('ace/theme/twilight');\r\n\t\t\tcustomJS.getSession().setMode('ace/mode/javascript');\r\n\r\n\t\t\tcustomJS.on('change', function () {\r\n\t\t\t\tapp.flags = app.flags || {};\r\n\t\t\t\tapp.flags._unsaved = true;\r\n\t\t\t\t$('#customJS-holder').val(customJS.getValue());\r\n\t\t\t});\r\n\r\n\t\t\tcustomHTML.setTheme('ace/theme/twilight');\r\n\t\t\tcustomHTML.getSession().setMode('ace/mode/html');\r\n\r\n\t\t\tcustomHTML.on('change', function () {\r\n\t\t\t\tapp.flags = app.flags || {};\r\n\t\t\t\tapp.flags._unsaved = true;\r\n\t\t\t\t$('#customHTML-holder').val(customHTML.getValue());\r\n\t\t\t});\r\n\r\n\t\t\t$('#save').on('click', function () {\r\n\t\t\t\tif ($('#enableLiveReload').is(':checked')) {\r\n\t\t\t\t\tsocket.emit('admin.reloadAllSessions');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\treturn Customise;\r\n});\r\n"]}