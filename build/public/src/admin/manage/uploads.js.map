{"version":3,"sources":["public/src/admin/manage/uploads.js"],"names":["define","uploader","api","Uploads","init","$","on","show","title","route","config","relative_path","params","folder","ajaxify","data","currentFolder","refresh","file","this","parents","bootbox","confirm","ok","del","path","attr","then","remove","catch","app","alertError"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,WAAY,OAAQ,SAAUC,EAAUC,GACvE,IAAIC,KAEJA,EAAQC,KAAO,WACdC,EAAE,WAAWC,GAAG,QAAS,WACxBL,EAASM,MACRC,MAAO,uCACPC,MAAOC,OAAOC,cAAgB,yBAC9BC,QAAUC,OAAQC,QAAQC,KAAKC,gBAC7B,WACFF,QAAQG,cAIVZ,EAAE,WAAWC,GAAG,QAAS,WACxB,IAAIY,EAAOb,EAAEc,MAAMC,QAAQ,eAC3BC,QAAQC,QAAQ,0CAA2C,SAAUC,GACpE,IAAKA,EAAI,CACR,OAGDrB,EAAIsB,IAAI,UACPC,KAAMP,EAAKQ,KAAK,eACdC,KAAK,KACPT,EAAKU,WACHC,MAAMC,IAAIC,iBAKhB,OAAO5B","file":"public/src/admin/manage/uploads.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('admin/manage/uploads', ['uploader', 'api'], function (uploader, api) {\r\n\tvar Uploads = {};\r\n\r\n\tUploads.init = function () {\r\n\t\t$('#upload').on('click', function () {\r\n\t\t\tuploader.show({\r\n\t\t\t\ttitle: '[[admin/manage/uploads:upload-file]]',\r\n\t\t\t\troute: config.relative_path + '/api/admin/upload/file',\r\n\t\t\t\tparams: { folder: ajaxify.data.currentFolder },\r\n\t\t\t}, function () {\r\n\t\t\t\tajaxify.refresh();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$('.delete').on('click', function () {\r\n\t\t\tvar file = $(this).parents('[data-path]');\r\n\t\t\tbootbox.confirm('[[admin/manage/uploads:confirm-delete]]', function (ok) {\r\n\t\t\t\tif (!ok) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tapi.del('/files', {\r\n\t\t\t\t\tpath: file.attr('data-path'),\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tfile.remove();\r\n\t\t\t\t}).catch(app.alertError);\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\treturn Uploads;\r\n});\r\n"]}