"use strict";define("admin/manage/admins-mods",["autocomplete","api","bootbox","categorySelector"],function(a,e,r,s){var i={};i.init=function(){a.user($("#admin-search"),function(a,e){socket.emit("admin.user.makeAdmins",[e.item.user.uid],function(a){if(a){return app.alertError(a.message)}app.alertSuccess("[[admin/manage/users:alerts.make-admin-success]]");$("#admin-search").val("");if($('.administrator-area [data-uid="'+e.item.user.uid+'"]').length){return}app.parseAndTranslate("admin/manage/admins-mods","admins.members",{admins:{members:[e.item.user]}},function(a){$(".administrator-area").prepend(a)})})});$(".administrator-area").on("click",".remove-user-icon",function(){var a=$(this).parents("[data-uid]");var e=a.attr("data-uid");if(parseInt(e,10)===parseInt(app.user.uid,10)){return app.alertError("[[admin/manage/users:alerts.no-remove-yourself-admin]]")}r.confirm("[[admin/manage/users:alerts.confirm-remove-admin]]",function(r){if(r){socket.emit("admin.user.removeAdmins",[e],function(e){if(e){return app.alertError(e.message)}app.alertSuccess("[[admin/manage/users:alerts.remove-admin-success]]");a.remove()})}})});a.user($("#global-mod-search"),function(a,r){e.put("/groups/global-moderators/membership/"+r.item.user.uid).then(()=>{app.alertSuccess("[[admin/manage/users:alerts.make-global-mod-success]]");$("#global-mod-search").val("");if($('.global-moderator-area [data-uid="'+r.item.user.uid+'"]').length){return}app.parseAndTranslate("admin/manage/admins-mods","globalMods.members",{globalMods:{members:[r.item.user]}},function(a){$(".global-moderator-area").prepend(a);$("#no-global-mods-warning").addClass("hidden")})}).catch(app.alertError)});$(".global-moderator-area").on("click",".remove-user-icon",function(){var a=$(this).parents("[data-uid]");var s=a.attr("data-uid");r.confirm("[[admin/manage/users:alerts.confirm-remove-global-mod]]",function(r){if(r){e.del("/groups/global-moderators/membership/"+s).then(()=>{app.alertSuccess("[[admin/manage/users:alerts.remove-global-mod-success]]");a.remove();if(!$(".global-moderator-area").children().length){$("#no-global-mods-warning").removeClass("hidden")}}).catch(app.alertError)}})});s.init($('[component="category-selector"]'),{onSelect:function(a){ajaxify.go("admin/manage/admins-mods"+(a.cid?"?cid="+a.cid:""))},localCategories:[]});a.user($(".moderator-search"),function(a,e){var r=$(a.target);var s=$(a.target).attr("data-cid");socket.emit("admin.categories.setPrivilege",{cid:s,privilege:ajaxify.data.allPrivileges,set:true,member:e.item.user.uid},function(a){if(a){return app.alertError(a.message)}app.alertSuccess("[[admin/manage/users:alerts.make-moderator-success]]");r.val("");if($('.moderator-area[data-cid="'+s+'"] [data-uid="'+e.item.user.uid+'"]').length){return}app.parseAndTranslate("admin/manage/admins-mods","globalMods.members",{globalMods:{members:[e.item.user]}},function(a){$('.moderator-area[data-cid="'+s+'"]').prepend(a);$('.no-moderator-warning[data-cid="'+s+'"]').addClass("hidden")})})});$(".moderator-area").on("click",".remove-user-icon",function(){var a=$(this).parents("[data-cid]");var e=a.attr("data-cid");var s=$(this).parents("[data-uid]");var i=s.attr("data-uid");r.confirm("[[admin/manage/users:alerts.confirm-remove-moderator]]",function(r){if(r){socket.emit("admin.categories.setPrivilege",{cid:e,privilege:ajaxify.data.allPrivileges,set:false,member:i},function(r){if(r){return app.alertError(r.message)}app.alertSuccess("[[admin/manage/users:alerts.remove-moderator-success]]");s.remove();if(!a.children().length){$('.no-moderator-warning[data-cid="'+e+'"]').removeClass("hidden")}})}})})};return i});
//# sourceMappingURL=admins-mods.js.map