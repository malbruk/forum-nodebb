{"version":3,"sources":["public/src/admin/dashboard/topics.js"],"names":["define","graph","hooks","ACP","init","set","dataset","ajaxify","data","then","onPage","updateTable","window","fetch","config","relative_path","url","location","search","credentials","response","ok","json","payload","app","parseAndTranslate","template","name","html","tbodyEl","document","querySelector","innerHTML","append","map","idx","el"],"mappings":"AAAA,aAEAA,OAAO,0BAA2B,qCAAsC,SAAU,CAACC,EAAOC,KACzF,MAAMC,KAENA,EAAIC,KAAO,MACVH,EAAMG,MACLC,IAAK,SACLC,QAASC,QAAQC,KAAKF,UACpBG,KAAK,KACPP,EAAMQ,OAAO,qCAAsCP,EAAIQ,iBAIzDR,EAAIQ,YAAc,MACjB,GAAIC,OAAOC,MAAO,CACjBA,SAASC,OAAOC,oBAAoBR,QAAQC,KAAKQ,MAAMJ,OAAOK,SAASC,UAAYC,YAAa,YAAaV,KAAMW,IAClH,GAAIA,EAASC,GAAI,CAChBD,EAASE,OAAOb,KAAK,SAAUc,GAC9BC,IAAIC,kBAAkBlB,QAAQC,KAAKkB,SAASC,KAAM,SAAUJ,EAAS,SAAUK,GAC9E,MAAMC,EAAUC,SAASC,cAAc,sBACvCF,EAAQG,UAAY,GACpBH,EAAQI,UAAUL,EAAKM,IAAI,CAACC,EAAKC,IAAOA,cAQ9C,OAAOjC","file":"public/src/admin/dashboard/topics.js","sourcesContent":["'use strict';\r\n\r\ndefine('admin/dashboard/topics', ['admin/modules/dashboard-line-graph', 'hooks'], (graph, hooks) => {\r\n\tconst ACP = {};\r\n\r\n\tACP.init = () => {\r\n\t\tgraph.init({\r\n\t\t\tset: 'topics',\r\n\t\t\tdataset: ajaxify.data.dataset,\r\n\t\t}).then(() => {\r\n\t\t\thooks.onPage('action:admin.dashboard.updateGraph', ACP.updateTable);\r\n\t\t});\r\n\t};\r\n\r\n\tACP.updateTable = () => {\r\n\t\tif (window.fetch) {\r\n\t\t\tfetch(`${config.relative_path}/api${ajaxify.data.url}${window.location.search}`, { credentials: 'include' }).then((response) => {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tresponse.json().then(function (payload) {\r\n\t\t\t\t\t\tapp.parseAndTranslate(ajaxify.data.template.name, 'topics', payload, function (html) {\r\n\t\t\t\t\t\t\tconst tbodyEl = document.querySelector('.topics-list tbody');\r\n\t\t\t\t\t\t\ttbodyEl.innerHTML = '';\r\n\t\t\t\t\t\t\ttbodyEl.append(...html.map((idx, el) => el));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn ACP;\r\n});\r\n"]}