"use strict";define("forum/topic/move",["categorySelector","alerts"],function(e,t){var o={};var i;var n;o.init=function(e,t,i){o.tids=e;o.currentCid=t;o.onComplete=i;o.moveAll=!e;c()};function c(){app.parseAndTranslate("partials/move_thread_modal",{},function(t){i=t;i.on("hidden.bs.modal",function(){i.remove()});i.find("#move-confirm").addClass("hide");if(o.moveAll||o.tids&&o.tids.length>1){i.find(".modal-header h3").translateText("[[topic:move_topics]]")}e.init(i.find('[component="category-selector"]'),{onSelect:d,privilege:"moderate"});i.find("#move_thread_commit").on("click",s);i.modal("show")})}function d(e){n=e;i.find("#move_thread_commit").prop("disabled",false)}function s(){var e=i.find("#move_thread_commit");if(!e.prop("disabled")&&n&&n.cid){e.prop("disabled",true);i.modal("hide");var c="[[topic:topic_move_success, "+n.name+"]]";if(o.tids&&o.tids.length>1){c="[[topic:topic_move_multiple_success, "+n.name+"]]"}else if(!o.tids){c="[[topic:topic_move_all_success, "+n.name+"]]"}var d={tids:o.tids?o.tids.slice():null,cid:n.cid,currentCid:o.currentCid,onComplete:o.onComplete};t.alert({alert_id:"tids_move_"+(o.tids?o.tids.join("-"):"all"),title:"[[topic:thread_tools.move]]",message:c,type:"success",timeout:1e4,timeoutfn:function(){l(d)},clickfn:function(e,t){delete t.timeoutfn;app.alertSuccess("[[topic:topic_move_undone]]")}})}}function l(e){$(window).trigger("action:topic.move",e);socket.emit(!e.tids?"topics.moveAll":"topics.move",e,function(t){if(t){return app.alertError(t.message)}if(typeof e.onComplete==="function"){e.onComplete()}})}return o});
//# sourceMappingURL=move.js.map