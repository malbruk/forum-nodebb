{"version":3,"sources":["public/src/client/header/notifications.js"],"names":["define","components","notifications","prepareDOM","notifContainer","get","notifTrigger","children","notifList","on","e","preventDefault","hasClass","requireAndCall","parents","socket","removeListener","onNewNotification","onUpdateCount","data","method","param","require"],"mappings":"AAAA,aAEAA,OAAO,8BAA+B,cAAe,SAAUC,GAC9D,IAAIC,KAEJA,EAAcC,WAAa,WAC1B,IAAIC,EAAiBH,EAAWI,IAAI,iBACpC,IAAIC,EAAeF,EAAeG,SAAS,KAC3C,IAAIC,EAAYP,EAAWI,IAAI,sBAE/BC,EAAaG,GAAG,QAAS,SAAUC,GAClCA,EAAEC,iBACF,GAAIP,EAAeQ,SAAS,QAAS,CACpC,OAGDC,EAAe,oBAAqBL,KAGrC,GAAIF,EAAaQ,QAAQ,aAAaF,SAAS,QAAS,CACvDC,EAAe,oBAAqBL,GAGrCO,OAAOC,eAAe,yBAA0BC,GAChDF,OAAON,GAAG,yBAA0BQ,GAEpCF,OAAOC,eAAe,kCAAmCE,GACzDH,OAAON,GAAG,kCAAmCS,IAG9C,SAASD,EAAkBE,GAC1BN,EAAe,oBAAqBM,GAGrC,SAASD,EAAcC,GACtBN,EAAe,mBAAoBM,GAGpC,SAASN,EAAeO,EAAQC,GAC/BC,SAAS,iBAAkB,SAAUpB,GACpCA,EAAckB,GAAQC,KAIxB,OAAOnB","file":"public/src/client/header/notifications.js","sourcesContent":["'use strict';\r\n\r\ndefine('forum/header/notifications', ['components'], function (components) {\r\n\tvar notifications = {};\r\n\r\n\tnotifications.prepareDOM = function () {\r\n\t\tvar notifContainer = components.get('notifications');\r\n\t\tvar notifTrigger = notifContainer.children('a');\r\n\t\tvar notifList = components.get('notifications/list');\r\n\r\n\t\tnotifTrigger.on('click', function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tif (notifContainer.hasClass('open')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\trequireAndCall('loadNotifications', notifList);\r\n\t\t});\r\n\r\n\t\tif (notifTrigger.parents('.dropdown').hasClass('open')) {\r\n\t\t\trequireAndCall('loadNotifications', notifList);\r\n\t\t}\r\n\r\n\t\tsocket.removeListener('event:new_notification', onNewNotification);\r\n\t\tsocket.on('event:new_notification', onNewNotification);\r\n\r\n\t\tsocket.removeListener('event:notifications.updateCount', onUpdateCount);\r\n\t\tsocket.on('event:notifications.updateCount', onUpdateCount);\r\n\t};\r\n\r\n\tfunction onNewNotification(data) {\r\n\t\trequireAndCall('onNewNotification', data);\r\n\t}\r\n\r\n\tfunction onUpdateCount(data) {\r\n\t\trequireAndCall('updateNotifCount', data);\r\n\t}\r\n\r\n\tfunction requireAndCall(method, param) {\r\n\t\trequire(['notifications'], function (notifications) {\r\n\t\t\tnotifications[method](param);\r\n\t\t});\r\n\t}\r\n\r\n\treturn notifications;\r\n});\r\n"]}