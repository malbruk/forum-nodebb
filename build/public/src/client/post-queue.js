"use strict";define("forum/post-queue",["categoryFilter","categorySelector","api"],function(t,e,i){var a={};a.init=function(){$('[data-toggle="tooltip"]').tooltip();t.init($('[component="category/dropdown"]'),{privilege:"moderate"});$(".posts-list").on("click","[data-action]",function(){var t=$(this).parents("[data-id]");var e=$(this).attr("data-action");var i=t.attr("data-id");var a=t.get(0).parentNode;if(!["accept","reject"].some(function(t){return e===t})){return}socket.emit("posts."+e,{id:i},function(e){if(e){return app.alertError(e.message)}t.remove();if(a.childElementCount===0){ajaxify.refresh()}});return false});n(".post-content",".post-content-editable","textarea");n(".topic-title",".topic-title-editable","input");$(".posts-list").on("click",".topic-category[data-editable]",function(){var t=$(this);var a=t.parents("[data-id]").attr("data-id");e.modal({onSubmit:function(e){Promise.all([i.get(`/categories/${e.cid}`,{}),socket.emit("posts.editQueuedContent",{id:a,cid:e.cid})]).then(function(e){var i=e[0];app.parseAndTranslate("post-queue","posts",{posts:[{category:i}]},function(e){if(t.find(".category-text").length){t.find(".category-text").text(e.find(".topic-category .category-text").text())}else{t.replaceWith(e.find(".topic-category"))}})}).catch(function(t){app.alertError(t)})}});return false});$('[component="post/content"] img:not(.not-responsive)').addClass("img-responsive")};function n(t,e,i){$(".posts-list").on("click",t,function(){var t=$(this);var a=t.parent().find(e);if(a.length){t.addClass("hidden");a.removeClass("hidden").find(i).focus()}});$(".posts-list").on("blur",e+" "+i,function(){var e=$(this);var i=e.parent().parent().find(t);var a=e.parents("[data-id]").attr("data-id");var n=t===".topic-title";socket.emit("posts.editQueuedContent",{id:a,title:n?e.val():undefined,content:n?undefined:e.val()},function(t,a){if(t){return app.alertError(t)}if(n){if(i.find(".title-text").length){i.find(".title-text").text(a.postData.title)}else{i.html(a.postData.title)}}else{i.html(a.postData.content)}e.parent().addClass("hidden");i.removeClass("hidden")})})}return a});
//# sourceMappingURL=post-queue.js.map