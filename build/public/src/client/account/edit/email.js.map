{"version":3,"sources":["public/src/client/account/edit/email.js"],"names":["define","header","api","AccountEditEmail","init","$","on","curPasswordEl","userData","uid","val","email","password","parents","toggleClass","app","alertError","btn","this","addClass","find","removeClass","put","then","res","ajaxify","go","userslug","catch","err","setTimeout"],"mappings":"AAAA,aAEAA,OAAO,4BAA6B,uBAAwB,OAAQ,SAAUC,EAAQC,GACrF,IAAIC,KAEJA,EAAiBC,KAAO,WACvBH,EAAOG,OAEPC,EAAE,cAAcC,GAAG,QAAS,WAC3B,IAAIC,EAAgBF,EAAE,yBACtB,IAAIG,GACHC,IAAKJ,EAAE,aAAaK,MACpBC,MAAON,EAAE,kBAAkBK,MAC3BE,SAAUL,EAAcG,OAGzB,IAAKF,EAASG,MAAO,CACpB,OAGD,GAAIH,EAASG,QAAUH,EAASI,SAAU,CACzCL,EAAcM,QAAQ,kBAAkBC,YAAY,YAAa,MACjE,OAAOC,IAAIC,WAAW,mCAGvB,IAAIC,EAAMZ,EAAEa,MACZD,EAAIE,SAAS,YAAYC,KAAK,KAAKC,YAAY,QAE/CnB,EAAIoB,IAAI,UAAYd,EAASC,IAAKD,GAAUe,KAAMC,IACjDP,EAAII,YAAY,YAAYD,KAAK,KAAKD,SAAS,QAC/CM,QAAQC,GAAG,QAAUF,EAAIG,SAAW,WAClCC,MAAOC,IACTC,WAAW,KACVb,EAAII,YAAY,YAAYD,KAAK,KAAKD,SAAS,QAC/CJ,IAAIC,WAAWa,IACb,OAGJ,OAAO,SAIT,OAAO1B","file":"public/src/client/account/edit/email.js","sourcesContent":["'use strict';\r\n\r\ndefine('forum/account/edit/email', ['forum/account/header', 'api'], function (header, api) {\r\n\tvar AccountEditEmail = {};\r\n\r\n\tAccountEditEmail.init = function () {\r\n\t\theader.init();\r\n\r\n\t\t$('#submitBtn').on('click', function () {\r\n\t\t\tvar curPasswordEl = $('#inputCurrentPassword');\r\n\t\t\tvar userData = {\r\n\t\t\t\tuid: $('#inputUID').val(),\r\n\t\t\t\temail: $('#inputNewEmail').val(),\r\n\t\t\t\tpassword: curPasswordEl.val(),\r\n\t\t\t};\r\n\r\n\t\t\tif (!userData.email) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (userData.email === userData.password) {\r\n\t\t\t\tcurPasswordEl.parents('.control-group').toggleClass('has-error', true);\r\n\t\t\t\treturn app.alertError('[[user:email_same_as_password]]');\r\n\t\t\t}\r\n\r\n\t\t\tvar btn = $(this);\r\n\t\t\tbtn.addClass('disabled').find('i').removeClass('hide');\r\n\r\n\t\t\tapi.put('/users/' + userData.uid, userData).then((res) => {\r\n\t\t\t\tbtn.removeClass('disabled').find('i').addClass('hide');\r\n\t\t\t\tajaxify.go('user/' + res.userslug + '/edit');\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tbtn.removeClass('disabled').find('i').addClass('hide');\r\n\t\t\t\t\tapp.alertError(err);\r\n\t\t\t\t}, 300); // for UX: this call is too fast.\r\n\t\t\t});\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\t};\r\n\r\n\treturn AccountEditEmail;\r\n});\r\n"]}