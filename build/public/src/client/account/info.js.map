{"version":3,"sources":["public/src/client/account/info.js"],"names":["define","header","components","sessions","Info","init","handleModerationNote","prepareSessionRevocation","$","on","note","val","socket","emit","uid","ajaxify","data","err","app","alertError","message","alertSuccess","timestamp","Date","now","user","timestampISO","utils","toISOString","parseAndTranslate","moderationNotes","html","prepend","find","timeago"],"mappings":"AAAA,aAGAA,OAAO,sBAAuB,uBAAwB,aAAc,0BAA2B,SAAUC,EAAQC,EAAYC,GAC5H,IAAIC,KAEJA,EAAKC,KAAO,WACXJ,EAAOI,OACPC,IACAH,EAASI,4BAGV,SAASD,IACRE,EAAE,8CAA8CC,GAAG,QAAS,WAC3D,IAAIC,EAAOF,EAAE,yCAAyCG,MACtDC,OAAOC,KAAK,0BAA4BC,IAAKC,QAAQC,KAAKF,IAAKJ,KAAMA,GAAQ,SAAUO,GACtF,GAAIA,EAAK,CACR,OAAOC,IAAIC,WAAWF,EAAIG,SAE3BZ,EAAE,yCAAyCG,IAAI,IAC/CO,IAAIG,aAAa,yCACjB,IAAIC,EAAYC,KAAKC,MACrB,IAAIR,IACHN,KAAMA,EACNe,KAAMP,IAAIO,KACVH,UAAWA,EACXI,aAAcC,MAAMC,YAAYN,KAEjCJ,IAAIW,kBAAkB,eAAgB,mBAAqBC,gBAAiBd,GAAQ,SAAUe,GAC7FvB,EAAE,8CAA8CwB,QAAQD,GACxDA,EAAKE,KAAK,YAAYC,gBAM1B,OAAO9B","file":"public/src/client/account/info.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/account/info', ['forum/account/header', 'components', 'forum/account/sessions'], function (header, components, sessions) {\r\n\tvar Info = {};\r\n\r\n\tInfo.init = function () {\r\n\t\theader.init();\r\n\t\thandleModerationNote();\r\n\t\tsessions.prepareSessionRevocation();\r\n\t};\r\n\r\n\tfunction handleModerationNote() {\r\n\t\t$('[component=\"account/save-moderation-note\"]').on('click', function () {\r\n\t\t\tvar note = $('[component=\"account/moderation-note\"]').val();\r\n\t\t\tsocket.emit('user.setModerationNote', { uid: ajaxify.data.uid, note: note }, function (err) {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\treturn app.alertError(err.message);\r\n\t\t\t\t}\r\n\t\t\t\t$('[component=\"account/moderation-note\"]').val('');\r\n\t\t\t\tapp.alertSuccess('[[user:info.moderation-note.success]]');\r\n\t\t\t\tvar timestamp = Date.now();\r\n\t\t\t\tvar data = [{\r\n\t\t\t\t\tnote: note,\r\n\t\t\t\t\tuser: app.user,\r\n\t\t\t\t\ttimestamp: timestamp,\r\n\t\t\t\t\ttimestampISO: utils.toISOString(timestamp),\r\n\t\t\t\t}];\r\n\t\t\t\tapp.parseAndTranslate('account/info', 'moderationNotes', { moderationNotes: data }, function (html) {\r\n\t\t\t\t\t$('[component=\"account/moderation-note/list\"]').prepend(html);\r\n\t\t\t\t\thtml.find('.timeago').timeago();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treturn Info;\r\n});\r\n"]}