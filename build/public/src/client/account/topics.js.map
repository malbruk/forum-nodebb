{"version":3,"sources":["public/src/client/account/topics.js"],"names":["define","header","infinitescroll","AccountTopics","template","page","init","handleInfiniteScroll","_template","ajaxify","data","pagination","currentPage","config","usePagination","loadMore","direction","params","utils","loadMoreXhr","done","topics","length","onTopicsLoaded","callback","app","parseAndTranslate","html","$","append","find","timeago","createUserTooltips","makeNumbersHumanReadable","window","trigger"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,uBAAwB,wBAAyB,SAAUC,EAAQC,GAClG,IAAIC,KAEJ,IAAIC,EACJ,IAAIC,EAAO,EAEXF,EAAcG,KAAO,WACpBL,EAAOK,OAEPH,EAAcI,qBAAqB,mBAGpCJ,EAAcI,qBAAuB,SAAUC,GAC9CJ,EAAWI,EACXH,EAAOI,QAAQC,KAAKC,WAAWC,YAC/B,IAAKC,OAAOC,cAAe,CAC1BZ,EAAeI,KAAKS,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAED,IAAIC,EAASC,MAAMD,SACnBZ,GAAQ,EACRY,EAAOZ,KAAOA,EAEdH,EAAeiB,YAAYF,EAAQ,SAAUP,EAAMU,GAClD,GAAIV,EAAKW,QAAUX,EAAKW,OAAOC,OAAQ,CACtCC,EAAeb,EAAKW,OAAQD,OACtB,CACNA,OAKH,SAASG,EAAeF,EAAQG,GAC/BC,IAAIC,kBAAkBtB,EAAU,UAAYiB,OAAQA,GAAU,SAAUM,GACvEC,EAAE,0BAA0BC,OAAOF,GACnCA,EAAKG,KAAK,YAAYC,UACtBN,IAAIO,qBACJd,MAAMe,yBAAyBN,EAAKG,KAAK,2BACzCF,EAAEM,QAAQC,QAAQ,wBAA0Bd,OAAQA,IACpDG,MAIF,OAAOrB","file":"public/src/client/account/topics.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/account/topics', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\r\n\tvar AccountTopics = {};\r\n\r\n\tvar template;\r\n\tvar page = 1;\r\n\r\n\tAccountTopics.init = function () {\r\n\t\theader.init();\r\n\r\n\t\tAccountTopics.handleInfiniteScroll('account/topics');\r\n\t};\r\n\r\n\tAccountTopics.handleInfiniteScroll = function (_template) {\r\n\t\ttemplate = _template;\r\n\t\tpage = ajaxify.data.pagination.currentPage;\r\n\t\tif (!config.usePagination) {\r\n\t\t\tinfinitescroll.init(loadMore);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction loadMore(direction) {\r\n\t\tif (direction < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar params = utils.params();\r\n\t\tpage += 1;\r\n\t\tparams.page = page;\r\n\r\n\t\tinfinitescroll.loadMoreXhr(params, function (data, done) {\r\n\t\t\tif (data.topics && data.topics.length) {\r\n\t\t\t\tonTopicsLoaded(data.topics, done);\r\n\t\t\t} else {\r\n\t\t\t\tdone();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onTopicsLoaded(topics, callback) {\r\n\t\tapp.parseAndTranslate(template, 'topics', { topics: topics }, function (html) {\r\n\t\t\t$('[component=\"category\"]').append(html);\r\n\t\t\thtml.find('.timeago').timeago();\r\n\t\t\tapp.createUserTooltips();\r\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\r\n\t\t\t$(window).trigger('action:topics.loaded', { topics: topics });\r\n\t\t\tcallback();\r\n\t\t});\r\n\t}\r\n\r\n\treturn AccountTopics;\r\n});\r\n"]}