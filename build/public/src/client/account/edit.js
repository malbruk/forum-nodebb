"use strict";define("forum/account/edit",["forum/account/header","accounts/picture","translator","api","hooks"],function(t,e,n,r,a){var i={};i.init=function(){t.init();$("#submitBtn").on("click",o);app.loadJQueryUI(function(){$("#inputBirthday").datepicker({changeMonth:true,changeYear:true,yearRange:"1900:-5y",defaultDate:"-13y"})});u();c();f();l();p();d()};function o(){const t=$('form[component="profile/edit/form"]').serializeObject();t.uid=ajaxify.data.uid;t.groupTitle=JSON.stringify(Array.isArray(t.groupTitle)?t.groupTitle:[t.groupTitle]);a.fire("action:profile.update",t);r.put("/users/"+t.uid,t).then(t=>{app.alertSuccess("[[user:profile_update_success]]");if(t.picture){$("#user-current-picture").attr("src",t.picture)}e.updateHeader(t.picture)}).catch(app.alertError);return false}function u(){$("#changePictureBtn").on("click",function(){e.openChangeModal();return false})}function c(){$("#deleteAccountBtn").on("click",function(){n.translate("[[user:delete_account_confirm]]",function(t){var e=bootbox.confirm(t+'<p><input type="password" class="form-control" id="confirm-password" /></p>',function(t){if(!t){return}var r=e.find(".btn-primary");r.html('<i class="fa fa-spinner fa-spin"></i>');r.prop("disabled",true);socket.emit("user.deleteAccount",{password:$("#confirm-password").val()},function(t){function e(){n.translate("[[modules:bootbox.confirm]]",function(t){r.text(t);r.prop("disabled",false)})}if(t){e();return app.alertError(t.message)}r.html('<i class="fa fa-check"></i>');app.logout()});return false});e.on("shown.bs.modal",function(){e.find("input").focus()})});return false})}function f(){$("#confirm-email").on("click",function(){var t=$(this).attr("disabled",true);socket.emit("user.emailConfirm",{},function(e){t.removeAttr("disabled");if(e){return app.alertError(e.message)}app.alertSuccess("[[notifications:email-confirm-sent]]")})})}function s(t,e){return t.length?"("+t.val().length+"/"+e+")":""}function l(){var t=$("#signature");$("#signatureCharCountLeft").html(s(t,ajaxify.data.maximumSignatureLength));t.on("keyup change",function(){$("#signatureCharCountLeft").html(s(t,ajaxify.data.maximumSignatureLength))})}function p(){var t=$("#aboutme");$("#aboutMeCharCountLeft").html(s(t,ajaxify.data.maximumAboutMeLength));t.on("keyup change",function(){$("#aboutMeCharCountLeft").html(s(t,ajaxify.data.maximumAboutMeLength))})}function d(){function t(t){var e=$("#groupTitle").val();if(!ajaxify.data.allowMultipleBadges||Array.isArray(e)&&e.length>1){return}var n=$("#groupTitle").find(":selected");if(n.length&&n.val()){if(t>0){n.insertAfter(n.next())}else if(n.prev().val()){n.insertBefore(n.prev())}}}$('[component="group/order/up"]').on("click",function(){t(-1)});$('[component="group/order/down"]').on("click",function(){t(1)})}return i});
//# sourceMappingURL=edit.js.map